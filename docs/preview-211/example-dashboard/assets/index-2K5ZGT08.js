var is=Object.defineProperty;var os=(t,e,s)=>e in t?is(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ne=(t,e,s)=>os(t,typeof e!="symbol"?e+"":e,s);import{r as ls,g as Pt,a as as,b as D,u as ct,c as cs,L as pe,O as us,d as Dt,e as fs,f as de,H as ms,h as ds,R as hs}from"./react-D4xWmHHw.js";import{F as W,f as Ft,S as ee,r as _s,a as ps,b as gs,c as xs,d as bs,L as xe,e as ys,g as vs,h as js,i as Ss,j as rt,k as ws,l as Ns,m as $s,n as Cs,o as ks,p as Rs,q as Es,s as As,t as bt,u as yt,v as Fe,w as Ie,x as Oe,y as Be,z as It,A as Ot,B as Ts,O as Ms}from"./vendor-CBL2mnL-.js";import{d as Bt,a as Ls,b as Ps,c as Ds,o as Xt,l as ke,s as it,e as Fs,i as qe,f as Is,g as Os,h as Bs,j as Xs,q as Vs}from"./d3-C73lxztM.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();var Je={exports:{}},Se={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vt;function Us(){if(vt)return Se;vt=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(n,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var a in i)a!=="key"&&(o[a]=i[a])}else o=i;return i=o.ref,{$$typeof:t,type:n,key:l,ref:i!==void 0?i:null,props:o}}return Se.Fragment=e,Se.jsx=s,Se.jsxs=s,Se}var jt;function Ws(){return jt||(jt=1,Je.exports=Us()),Je.exports}var r=Ws();Array.prototype.sortKey||(Array.prototype.sortKey=function(t){return this.sort((e,s)=>{const n=t(e),i=t(s);if(Array.isArray(n)&&Array.isArray(i)){for(let o=0;o<Math.min(n.length,i.length);o++){if(n[o]<i[o])return-1;if(n[o]>i[o])return 1}return 0}return n<i?-1:n>i?1:0})});var Ks=ls();const Hs=Pt(Ks);var Ze={exports:{}},Qe={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var St;function Ys(){if(St)return Qe;St=1;var t=as().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return Qe.c=function(e){return t.H.useMemoCache(e)},Qe}var wt;function zs(){return wt||(wt=1,Ze.exports=Ys()),Ze.exports}var V=zs();function Gs(t){const e=V.c(15),{message:s,onDismiss:n,isVisible:i}=t,[o,l]=D.useState(i);let a,c;if(e[0]!==i?(a=()=>{if(i){l(!0);return}else{const b=setTimeout(()=>{l(!1)},300);return()=>clearTimeout(b)}},c=[i],e[0]=i,e[1]=a,e[2]=c):(a=e[1],c=e[2]),D.useEffect(a,c),!o)return null;const m=`notification ${i?"notification--visible":"notification--hidden"}`;let u;e[3]!==s?(u=r.jsx("div",{className:"notification__content",children:s}),e[3]=s,e[4]=u):u=e[4];let d;e[5]!==n?(d=b=>{b.stopPropagation(),n()},e[5]=n,e[6]=d):d=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(W,{icon:Ft}),e[7]=f):f=e[7];let p;e[8]!==d?(p=r.jsx("button",{className:"notification__close",onClick:d,"aria-label":"Close notification",children:f}),e[8]=d,e[9]=p):p=e[9];let x;return e[10]!==n||e[11]!==m||e[12]!==u||e[13]!==p?(x=r.jsxs("div",{className:m,onClick:n,children:[u,p]}),e[10]=n,e[11]=m,e[12]=u,e[13]=p,e[14]=x):x=e[14],x}const Vt=D.createContext(null);function qs(t){const e=V.c(14),{children:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],e[0]=n):n=e[0];const[i,o]=D.useState(n);let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=new Map,e[1]=l):l=e[1];const a=D.useRef(l),c=D.useRef(0);let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=j=>{clearTimeout(a.current.get(j)),a.current.delete(j),o(v=>v.filter(N=>N.id!==j))},e[2]=m):m=e[2];const u=m;let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=(j,v)=>{const N=c.current=c.current+1,$={id:N,message:j,duration:v};if(o(w=>[...w,$]),v!==null){const w=setTimeout(()=>{u(N)},v);a.current.set(N,w)}return N},e[3]=d):d=e[3];const f=d;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=(j,v,N)=>{if(o($=>$.map(w=>w.id===j?{...w,message:v,duration:N}:w)),N!==null){clearTimeout(a.current.get(j));const $=setTimeout(()=>{u(j)},N);a.current.set(j,$)}},e[4]=p):p=e[4];const x=p;let b;e[5]===Symbol.for("react.memo_cache_sentinel")?(b={addNotification:f,updateNotification:x,dismissNotification:u},e[5]=b):b=e[5];let g;if(e[6]!==i){let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j=(v,N)=>r.jsx("div",{className:"notification-wrapper",style:{top:`${20+N*80}px`},children:r.jsx(Gs,{message:v.message,isVisible:!0,onDismiss:()=>u(v.id)})},v.id),e[8]=j):j=e[8],g=i.map(j),e[6]=i,e[7]=g}else g=e[7];let _;e[9]!==g?(_=r.jsx("div",{className:"notifications",children:g}),e[9]=g,e[10]=_):_=e[10];let y;return e[11]!==s||e[12]!==_?(y=r.jsxs(Vt.Provider,{value:b,children:[s,_]}),e[11]=s,e[12]=_,e[13]=y):y=e[13],y}function Js(){const t=D.useContext(Vt);if(!t)throw new Error("useNotification must be used within a NotificationProvider");return t}function ut(){const t=V.c(2),[e,s]=D.useState(!1);let n,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{const o=function(){s(window.matchMedia("(max-width: 768px)").matches)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},i=[],t[0]=n,t[1]=i):(n=t[0],i=t[1]),D.useEffect(n,i),e}function ve(t){const e=V.c(9),{value:s,onChange:n,options:i,disabled:o}=t,l=o===void 0?!1:o,a=ut();console.assert(ee(i.map(Zs)).size===i.length);const c=`toggle ${l?"toggle--disabled":""}`;let m;e[0]!==l||e[1]!==a||e[2]!==n||e[3]!==i||e[4]!==s?(m=i.map(d=>r.jsx("button",{className:`toggle__button${s===d.value?" toggle__button--active":""} ${l?"toggle__button--disabled":""}`,onClick:()=>{if(!l)if(i.length==2&&s===d.value){const f=i.find(p=>p.value!==d.value).value;n(f)}else n(d.value)},children:a?d.mobileContent??d.content:d.content},String(d.value))),e[0]=l,e[1]=a,e[2]=n,e[3]=i,e[4]=s,e[5]=m):m=e[5];let u;return e[6]!==c||e[7]!==m?(u=r.jsx("div",{className:c,children:m}),e[6]=c,e[7]=m,e[8]=u):u=e[8],u}function Zs(t){return t.value}class Ut{constructor(e,s,n,i){ne(this,"createdAt");this.name=e,this.predicate=s,this.component=n,this.extraData=i,this.createdAt=Date.now()}}const Wt=D.createContext(void 0);function Qs(t){const e=V.c(18),{children:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=["covering",new Map],e[0]=n):n=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=new Map([n,["rolling",new Map]]),e[1]=i):i=e[1];const[o,l]=D.useState(i),[a,c]=D.useState("covering");let m;e[2]!==o||e[3]!==a?(m=o.get(a)||new Map,e[2]=o,e[3]=a,e[4]=m):m=e[4];const u=m;let d;e[5]!==a?(d=y=>{l(j=>{const v=new Map(j);return v.set(a,y),v})},e[5]=a,e[6]=d):d=e[6];const f=d;let p;e[7]!==u||e[8]!==f?(p=(y,j)=>{const v=new Map(u),$=(v.get(y)||[]).filter(w=>w.name!==j);$.length===0?v.delete(y):v.set(y,$),f(v)},e[7]=u,e[8]=f,e[9]=p):p=e[9];const x=p;let b;e[10]!==u||e[11]!==a||e[12]!==x||e[13]!==f?(b={filters:u,setFilters:f,removeFilter:x,observationCategory:a,setObservationCategory:c},e[10]=u,e[11]=a,e[12]=x,e[13]=f,e[14]=b):b=e[14];const g=b;let _;return e[15]!==s||e[16]!==g?(_=r.jsx(Wt.Provider,{value:g,children:s}),e[15]=s,e[16]=g,e[17]=_):_=e[17],_}function We(){const t=D.useContext(Wt);if(t===void 0)throw new Error("useFilters must be used within a FilterProvider");return t}const Kt=D.createContext(null);function en(t){const e=V.c(8),{state:s}=t;if(!s.visible)return null;const n=`${s.x+10}px`,i=`${s.y-28}px`;let o;e[0]!==n||e[1]!==i?(o={position:"fixed",left:n,top:i,display:"block",pointerEvents:"none",zIndex:9999},e[0]=n,e[1]=i,e[2]=o):o=e[2];let l;e[3]!==s.content?(l={__html:s.content},e[3]=s.content,e[4]=l):l=e[4];let a;return e[5]!==o||e[6]!==l?(a=cs.createPortal(r.jsx("div",{className:"cursor-tooltip",style:o,dangerouslySetInnerHTML:l}),document.body),e[5]=o,e[6]=l,e[7]=a):a=e[7],a}function tn(t){const e=V.c(15),{children:s}=t,n=ct();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={visible:!1,content:"",x:0,y:0,owner:null},e[0]=i):i=e[0];const[o,l]=D.useState(i);let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{l(sn)},e[1]=a):a=e[1];let c;e[2]!==n.pathname?(c=[n.pathname],e[2]=n.pathname,e[3]=c):c=e[3],D.useEffect(a,c);let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=(j,v,N,$)=>{l({visible:!0,content:j,x:v,y:N,owner:$})},e[4]=m):m=e[4];const u=m;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=j=>{l(v=>v.owner===j?{...v,visible:!1,owner:null}:v)},e[5]=d):d=e[5];const f=d;let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=(j,v,N)=>{l($=>$.visible&&$.owner===N&&($.x!==j||$.y!==v)?{...$,x:j,y:v}:$)},e[6]=p):p=e[6];const x=p;let b;e[7]!==o.visible?(b={showTooltip:u,hideTooltip:f,moveTooltip:x,visible:o.visible},e[7]=o.visible,e[8]=b):b=e[8];const g=b;let _;e[9]!==o?(_=r.jsx(en,{state:o}),e[9]=o,e[10]=_):_=e[10];let y;return e[11]!==s||e[12]!==g||e[13]!==_?(y=r.jsxs(Kt.Provider,{value:g,children:[s,_]}),e[11]=s,e[12]=g,e[13]=_,e[14]=y):y=e[14],y}function sn(t){return{...t,visible:!1,owner:null}}function Ke(){const t=D.useContext(Kt);if(!t)throw new Error("useTooltip must be used within a TooltipProvider");return t}var nn=_s();const Ae=Pt(nn);function Ht(t,e=0){return Array.from(t).reduce((s,n)=>s+n,e)}function Yt(t,e=!1){t.current&&(e&&t.current.querySelectorAll("code").forEach(s=>{s.removeAttribute("data-highlighted")}),t.current.querySelectorAll("code:not([data-highlighted='yes'])").forEach(s=>{Ae.highlightElement(s)}))}function Re(t,e){if(e){let s=null,n=null;for(let i=0;i<t.length;i++){const o=t[i],l=e(o);l!=null&&(n===null||l>n)&&(n=l,s=o)}return s}else{let s=null;for(let n=0;n<t.length;n++){const i=t[n];i!=null&&(s===null||i>s)&&(s=i)}return s}}function rn(t,e){{let s=null;for(let n=0;n<t.length;n++){const i=t[n];i!=null&&(s===null||i<s)&&(s=i)}return s}}function et(t,e,s){let n=0,i=t.length;for(;n<i;){const o=n+i>>>1;(s?s(t[o])<=e:t[o]<=e)?n=o+1:i=o}return n}let we=null;function on(){return we||(we=document.createElement("div"),we.style.cssText=`
      position: absolute;
      visibility: hidden;
      white-space: nowrap;
      top: -9999px;
      left: -9999px;
      pointer-events: none;
      z-index: -1;
    `,document.body.appendChild(we)),we}function tt(t,e=""){const s=on();s.className=e,s.textContent=t;const n=s.getBoundingClientRect();return{width:n.width,height:n.height}}function zt(t,e,s){if(t.metaKey||t.ctrlKey){const n=window.location,i=`${n.origin}${n.pathname}#${e}`;console.log(n.origin,n.pathname,e,i),window.open(i,"_blank")}else s(e)}function Gt(t){return t.split("::").pop()||t}const oe={select:Bt,scaleLinear:ke,scaleOrdinal:Xt,scaleBand:Ds,axisBottom:Ps,axisLeft:Ls},Nt=5,re=2.5;function ln(t){const e=V.c(39),{feature:s,observations:n}=t,i=D.useRef(null),o=D.useRef(null),{filters:l,setFilters:a}=We(),{showTooltip:c,hideTooltip:m,moveTooltip:u}=Ke();let d;e[0]!==s||e[1]!==l?(d=function(){const C=l.get(s)||[];if(C.length===0)return ee();console.assert(C.length===1);const E=C[0];return ee(E.extraData.selectedValues)},e[0]=s,e[1]=l,e[2]=d):d=e[2];const f=d;let p;e[3]!==f?(p=f(),e[3]=f,e[4]=p):p=e[4];const x=p;let b;e[5]!==n.raw?(b=n.raw.filter(hn),e[5]=n.raw,e[6]=b):b=e[6];let g;e[7]!==n.filtered?(g=n.filtered.filter(dn),e[7]=n.filtered,e[8]=g):g=e[8];let _;e[9]!==b||e[10]!==g?(_={raw:b,filtered:g},e[9]=b,e[10]=g,e[11]=_):_=e[11];const y=_;let j;e[12]!==s||e[13]!==l||e[14]!==x||e[15]!==a?(j=L=>{let C=ee();x.equals(ee([L]))?C=ee():C=ee([L]);let E;C.size===1?E=C.first():E=C.map(mn).join(" or ");const h=[];C.size>0&&h.push(new Ut(E,R=>C.some(T=>R.features.get(s)===T),s,{selectedValues:C}));const S=new Map(l);S.set(s,h),a(S)},e[12]=s,e[13]=l,e[14]=x,e[15]=a,e[16]=j):j=e[16];const v=j;let N;e[17]!==s||e[18]!==y.filtered||e[19]!==y.raw||e[20]!==m||e[21]!==u||e[22]!==v||e[23]!==x||e[24]!==c?(N=()=>{const L=ee(y.raw.map(k=>k.features.get(s)));let C=new Map;for(const k of y.filtered){const I=k.features.get(s);C.set(I,(C.get(I)||0)+1)}const E=Ht(Array.from(C.values()));C=new Map([...C.entries()].sortKey(fn)),oe.select(o.current).selectAll("*").remove();const h=i.current.clientWidth,S=L.size<Nt?85:170,R=oe.select(o.current).attr("width",h).attr("height",S).append("g"),T=function(k,I){const[A,B]=I;c(`${s}<br>${A}: ${B}`,k.clientX,k.clientY,"tyche-nominal")};if(L.size<Nt){const k={top:0,right:15,bottom:20,left:15},I=h-k.left-k.right,A=S-k.top-k.bottom,B=oe.scaleLinear().domain([0,1]).range([0,I]);let U;C.has(He)||C.has(Ye)?U=un:U=oe.scaleOrdinal().domain(Array.from(C.keys())).range([se.PRIMARY,se.ACCENT,se.ACCENT2,se.ACCENT3,se.ACCENT4]);const O=R.append("g").attr("transform",`translate(${k.left},${k.top})`);let P=0;const X=A-k.bottom;C.forEach((z,H)=>{const K=z/E*I,te=x.has(H);O.append("rect").attr("x",P).attr("y",0).attr("width",K).attr("height",X).attr("fill",U(H)).style("cursor","pointer").on("click",()=>v(H)).on("mouseover",G=>{T(G,[H,z])}).on("mousemove",G=>u(G.clientX,G.clientY,"tyche-nominal")).on("mouseleave",()=>m("tyche-nominal")),te&&O.append("rect").attr("x",P+re).attr("y",re).attr("width",K-2*re).attr("height",X-2*re).attr("fill",U(H)).attr("stroke","white").attr("stroke-width",re).style("pointer-events","none"),O.append("text").attr("x",P+K/2).attr("y",X/2).attr("text-anchor","middle").attr("dominant-baseline","central").attr("fill","white").text(H).style("font-size","12px"),P=P+K}),O.append("g").attr("transform",`translate(0,${X})`).call(oe.axisBottom(B).tickFormat(cn)),O.append("text").attr("x",I/2).attr("y",X+30).attr("text-anchor","middle").text("% of observations").style("font-size","12px")}else{const k={top:5,right:5,bottom:30,left:30},I=h-k.left-k.right,A=S-k.top-k.bottom,B=oe.scaleBand().domain(Array.from(C.keys())).range([0,I]).padding(.2),U=oe.scaleLinear().domain([0,Re(Array.from(C.values()))||0]).range([A,0]),O=R.append("g").attr("transform",`translate(${k.left},${k.top})`);O.selectAll(".bar").data(Array.from(C.entries())).enter().append("rect").attr("class","bar").attr("x",P=>{const[X]=P;return B(X)||0}).attr("y",P=>{const[,X]=P;return U(X)}).attr("width",B.bandwidth()).attr("height",P=>{const[,X]=P;return A-U(X)}).attr("fill",se.PRIMARY).style("cursor","pointer").on("click",function(P,X){const[z]=X;v(z)}).on("mouseover",function(P,X){T(P,X)}).on("mousemove",P=>u(P.clientX,P.clientY,"tyche-nominal")).on("mouseleave",()=>m("tyche-nominal")),O.selectAll(".inner-bar").data(Array.from(C.entries()).filter(P=>{const[X]=P;return x.has(X)})).enter().append("rect").attr("class","inner-bar").attr("x",P=>{const[X]=P;return(B(X)||0)+re}).attr("y",P=>{const[,X]=P;return U(X)+re}).attr("width",B.bandwidth()-2*re).attr("height",P=>{const[,X]=P;return A-U(X)-2*re}).attr("fill",se.PRIMARY).attr("stroke","white").attr("stroke-width",re).style("pointer-events","none"),O.append("g").attr("transform",`translate(0,${A})`).call(oe.axisBottom(B)).selectAll("text").attr("transform","rotate(-45)").style("text-anchor","end"),O.append("g").call(oe.axisLeft(U).ticks(7).tickFormat(an)),O.append("text").attr("transform","rotate(-90)").attr("y",-30).attr("x",-A/2).attr("text-anchor","middle").text("Count").style("font-size","12px")}},e[17]=s,e[18]=y.filtered,e[19]=y.raw,e[20]=m,e[21]=u,e[22]=v,e[23]=x,e[24]=c,e[25]=N):N=e[25];let $;e[26]!==s||e[27]!==y||e[28]!==m||e[29]!==u||e[30]!==v||e[31]!==x||e[32]!==c?($=[y,s,m,u,v,x,c],e[26]=s,e[27]=y,e[28]=m,e[29]=u,e[30]=v,e[31]=x,e[32]=c,e[33]=$):$=e[33],D.useEffect(N,$);let w;e[34]!==s?(w=r.jsx("div",{className:"tyche__nominal__feature",children:s}),e[34]=s,e[35]=w):w=e[35];let M;e[36]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx("div",{ref:i,className:"tyche__nominal__chart",children:r.jsx("svg",{ref:o,style:{width:"100%"}})}),e[36]=M):M=e[36];let F;return e[37]!==w?(F=r.jsxs("div",{children:[w,M]}),e[37]=w,e[38]=F):F=e[38],F}function an(t){return Math.round(Number(t)).toString()}function cn(t){return`${Math.round(Number(t)*100)}%`}function un(t){return t===He?se.SUCCESS:t===Ye?se.ERROR:se.PRIMARY}function fn(t){const[e]=t;return e===He?0:e===Ye?1:e}function mn(t){return`${t}`}function dn(t){return t.status!=="gave_up"}function hn(t){return t.status!=="gave_up"}function ft(t){const e=V.c(17),{title:s,children:n,defaultState:i,onStateChange:o,headerClass:l,contentClass:a}=t,c=i===void 0?"open":i,m=l===void 0?"":l,u=a===void 0?"":a,[d,f]=D.useState(c);let p;e[0]!==o||e[1]!==d?(p=()=>{const v=d==="open"?"closed":"open";f(v),o==null||o(v)},e[0]=o,e[1]=d,e[2]=p):p=e[2];const x=p,b=`collapsible__header ${m}`;let g;e[3]!==d?(g=r.jsx("span",{className:"collapsible__toggle",children:d==="open"?r.jsx(W,{icon:ps}):r.jsx(W,{icon:gs})}),e[3]=d,e[4]=g):g=e[4];let _;e[5]!==b||e[6]!==g||e[7]!==s||e[8]!==x?(_=r.jsxs("div",{className:b,onClick:x,children:[g,s]}),e[5]=b,e[6]=g,e[7]=s,e[8]=x,e[9]=_):_=e[9];let y;e[10]!==n||e[11]!==u||e[12]!==d?(y=d==="open"&&r.jsx("div",{className:`${u}`,children:n}),e[10]=n,e[11]=u,e[12]=d,e[13]=y):y=e[13];let j;return e[14]!==_||e[15]!==y?(j=r.jsxs("div",{children:[_,y]}),e[14]=_,e[15]=y,e[16]=j):j=e[16],j}function mt(t){const e=V.c(5),{title:s,children:n,defaultState:i,onStateChange:o}=t,l=i===void 0?"open":i;let a;return e[0]!==n||e[1]!==l||e[2]!==o||e[3]!==s?(a=r.jsx("div",{className:"tyche__section",children:r.jsx(ft,{title:s,defaultState:l,onStateChange:o,headerClass:"tyche__section__header",contentClass:"tyche__section__content",children:n})}),e[0]=n,e[1]=l,e[2]=o,e[3]=s,e[4]=a):a=e[4],a}function _n(t){const e=V.c(9),{observations:s}=t;let n,i,o,l;if(e[0]!==s){l=Symbol.for("react.early_return_sentinel");e:{const c=new Set;if(s.raw.forEach(m=>{for(const u of m.features.keys())u.startsWith("Retried draw from")||c.add(u)}),c.size===0){l=null;break e}n=mt,i="Features",o=Array.from(c).sort().map(m=>r.jsx(ln,{feature:m,observations:s}))}e[0]=s,e[1]=n,e[2]=i,e[3]=o,e[4]=l}else n=e[1],i=e[2],o=e[3],l=e[4];if(l!==Symbol.for("react.early_return_sentinel"))return l;let a;return e[5]!==n||e[6]!==i||e[7]!==o?(a=r.jsx(n,{title:i,children:o}),e[5]=n,e[6]=i,e[7]=o,e[8]=a):a=e[8],a}function pn(){const t=V.c(7),{filters:e,removeFilter:s}=We();let n,i;if(t[0]!==e||t[1]!==s){i=Symbol.for("react.early_return_sentinel");e:{const o=Array.from(e.values()).flat().sortKey(gn);if(o.length===0){i=null;break e}let l;t[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"tyche__filters__title",children:"Current Filters"}),t[4]=l):l=t[4];let a;t[5]!==s?(a=c=>r.jsxs("div",{className:"tyche__filters__filter",children:[r.jsxs("div",{className:"tyche__filters__filter__component",children:[r.jsx("div",{className:"tyche__filters__filter__remove",onClick:()=>s(c.component,c.name),children:r.jsx(W,{icon:Ft})}),c.component]}),r.jsx("div",{className:"tyche__filters__filter__name",children:c.name})]},`${c.component}-${c.name}`),t[5]=s,t[6]=a):a=t[6],n=r.jsxs("div",{className:"tyche__filters",children:[l,o.map(a)]})}t[0]=e,t[1]=s,t[2]=n,t[3]=i}else n=t[2],i=t[3];return i!==Symbol.for("react.early_return_sentinel")?i:n}function gn(t){return t.createdAt}function qt(t){const e=t.regex,s=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),n=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],a={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:n,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},m={className:"subst",begin:/\{/,end:/\}/,keywords:a,illegal:/#/},u={begin:/\{\{/,relevance:0},d={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c,u,m]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c,u,m]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,u,m]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,u,m]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},f="[0-9](_?[0-9])*",p=`(\\b(${f}))?\\.(${f})|\\b(${f})\\.`,x=`\\b|${n.join("|")}`,b={className:"number",relevance:0,variants:[{begin:`(\\b(${f})|(${p}))[eE][+-]?(${f})[jJ]?(?=${x})`},{begin:`(${p})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${x})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${x})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${x})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${x})`},{begin:`\\b(${f})[jJ](?=${x})`}]},g={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:a,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},_={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:["self",c,b,d,t.HASH_COMMENT_MODE]}]};return m.contains=[d,b,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:a,illegal:/(<\/|\?)|=>/,contains:[c,b,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},d,g,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,s],scope:{1:"keyword",3:"title.function"},contains:[_]},{variants:[{match:[/\bclass/,/\s+/,s,/\s*/,/\(\s*/,s,/\s*\)/]},{match:[/\bclass/,/\s+/,s]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[b,_,d]}]}}function $t(t){const e=V.c(31),{currentPage:s,pageCount:n,onPageChange:i}=t;console.assert(n>1);let o;e[0]!==s||e[1]!==n?(o=function(){return n<=7?Array.from({length:n},xn):s<=3?[0,1,2,3,4,"ellipsis",n-1]:s>=n-4?[0,"ellipsis",n-5,n-4,n-3,n-2,n-1]:[0,"ellipsis",s-1,s,s+1,"ellipsis",n-1]},e[0]=s,e[1]=n,e[2]=o):o=e[2];const l=o;let a;e[3]!==l?(a=l(),e[3]=l,e[4]=a):a=e[4];const c=a;let m;e[5]!==s||e[6]!==i?(m=function(M){typeof M=="number"&&s!==M&&i(M)},e[5]=s,e[6]=i,e[7]=m):m=e[7];const u=m;let d;e[8]!==s||e[9]!==i?(d=function(){s>0&&i(s-1)},e[8]=s,e[9]=i,e[10]=d):d=e[10];const f=d;let p;e[11]!==s||e[12]!==i||e[13]!==n?(p=function(){s<n-1&&i(s+1)},e[11]=s,e[12]=i,e[13]=n,e[14]=p):p=e[14];const x=p,b=`pagination__nav pagination__nav--left ${s===0?"pagination__nav--disabled":""}`;let g;e[15]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(W,{icon:xs}),e[15]=g):g=e[15];let _;e[16]!==f||e[17]!==b?(_=r.jsx("div",{className:b,onClick:f,children:g}),e[16]=f,e[17]=b,e[18]=_):_=e[18];let y;e[19]!==s||e[20]!==u||e[21]!==c?(y=c.map((w,M)=>{if(w==="ellipsis")return r.jsx("div",{className:" pagination__ellipsis",children:"..."},`ellipsis-${M}`);const F=w===s;return r.jsx("div",{className:`pagination__number ${F?"pagination__number--current":""}`,onClick:()=>u(w),children:w+1},w)}),e[19]=s,e[20]=u,e[21]=c,e[22]=y):y=e[22];const j=`pagination__nav pagination__nav--right ${s===n-1?"pagination__nav--disabled":""}`;let v;e[23]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(W,{icon:bs}),e[23]=v):v=e[23];let N;e[24]!==x||e[25]!==j?(N=r.jsx("div",{className:j,onClick:x,children:v}),e[24]=x,e[25]=j,e[26]=N):N=e[26];let $;return e[27]!==N||e[28]!==_||e[29]!==y?($=r.jsxs("div",{className:"pagination",children:[_,y,N]}),e[27]=N,e[28]=_,e[29]=y,e[30]=$):$=e[30],$}function xn(t,e){return e}Ae.registerLanguage("python",qt);const st=30;function bn(t){const e=V.c(36),{observations:s,observationCategory:n}=t,i=D.useRef(null),[o,l]=D.useState(0);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{l(0)},e[0]=a):a=e[0];let c;e[1]!==n?(c=[n],e[1]=n,e[2]=c):c=e[2],D.useEffect(a,c);let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=function(){i.current&&i.current.querySelectorAll("code:not([data-highlighted='yes'])").forEach(jn)},e[3]=m):m=e[3];const u=m;let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{u()},e[4]=d):d=e[4];let f;e[5]!==s||e[6]!==o?(f=[s,o],e[5]=s,e[6]=o,e[7]=f):f=e[7],D.useEffect(d,f);let p,x,b,g,_,y,j,v;if(e[8]!==s.filtered||e[9]!==o){const M=new Map;s.filtered.forEach(L=>{const C=L.representation;M.set(C,(M.get(C)||0)+1)}),x=Math.ceil(M.size/st);const F=Array.from(M.entries()).sortKey(vn).slice(o*st,(o+1)*st);p=mt,v="String representations",b="closed",e[18]===Symbol.for("react.memo_cache_sentinel")?(g=L=>{L==="open"&&requestAnimationFrame(()=>{u()})},e[18]=g):g=e[18],_=i,e[19]!==o||e[20]!==x?(y=x>1&&r.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"12px"},children:r.jsx($t,{currentPage:o,pageCount:x,onPageChange:l})}),e[19]=o,e[20]=x,e[21]=y):y=e[21],j=F.map(yn),e[8]=s.filtered,e[9]=o,e[10]=p,e[11]=x,e[12]=b,e[13]=g,e[14]=_,e[15]=y,e[16]=j,e[17]=v}else p=e[10],x=e[11],b=e[12],g=e[13],_=e[14],y=e[15],j=e[16],v=e[17];let N;e[22]!==o||e[23]!==x?(N=x>1&&r.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"12px"},children:r.jsx($t,{currentPage:o,pageCount:x,onPageChange:l})}),e[22]=o,e[23]=x,e[24]=N):N=e[24];let $;e[25]!==N||e[26]!==_||e[27]!==y||e[28]!==j?($=r.jsxs("div",{ref:_,children:[y,j,N]}),e[25]=N,e[26]=_,e[27]=y,e[28]=j,e[29]=$):$=e[29];let w;return e[30]!==p||e[31]!==b||e[32]!==g||e[33]!==$||e[34]!==v?(w=r.jsx(p,{title:v,defaultState:b,onStateChange:g,children:$}),e[30]=p,e[31]=b,e[32]=g,e[33]=$,e[34]=v,e[35]=w):w=e[35],w}function yn(t){const[e,s]=t;return r.jsxs("div",{style:{position:"relative"},className:"tyche__representation__example",children:[r.jsx("pre",{children:r.jsx("code",{className:"language-python",children:e})}),s>1&&r.jsxs("div",{className:"tyche__representation__example__count",children:["x ",s]})]},e)}function vn(t){const[,e]=t;return-e}function jn(t){Ae.highlightElement(t)}const Ct=640;function Sn({name:t,observations:e,verticalAxis:s,horizontalAxis:n,cssStyle:i=(o,l)=>({})}){const{filters:o,setFilters:l}=We(),{showTooltip:a,hideTooltip:c,moveTooltip:m}=Ke();function u(){const h=o.get(t)||[];if(h.length===0)return ee();console.assert(h.length===1);const S=h[0];return ee(S.extraData.selectedCells)}const d=u(),f=[],p=Array(s.length).fill(0),x=Array(n.length).fill(0);let b=0;for(let h=0;h<s.length;h++){f[h]=[];for(let S=0;S<n.length;S++)f[h][S]={count:0,widthPercent:0}}e.filtered.forEach(h=>{for(let S=0;S<s.length;S++){const[,R]=s[S];if(R(h)){for(let T=0;T<n.length;T++){const[,k]=n[T];if(k(h)){f[S][T].count++,p[S]++,x[T]++,b++;break}}break}}});const g=p.map((h,S)=>h>0?S:null).filter(h=>h!==null),_=x.map((h,S)=>h>0?S:null).filter(h=>h!==null),y=(h,S)=>{let R=ee();if(h!==null&&S!==null){const A=xe([h,S]);d.equals(ee([A]))?R=ee():R=ee([A])}else h!==null?(console.assert(S===null),_.forEach(A=>{f[h][A].count>0&&(R=R.add(xe([h,A])))})):S!==null&&(console.assert(h===null),g.forEach(A=>{f[A][S].count>0&&(R=R.add(xe([A,S])))}));function T(){if(R.size===0)return"";let A=R;const B=[],U=[...g.map(O=>({name:s[O][0],cells:_.filter(P=>f[O][P].count>0).map(P=>xe([O,P]))})),..._.map(O=>({name:n[O][0],cells:g.filter(P=>f[P][O].count>0).map(P=>xe([P,O]))}))];for(const O of U)O.cells.length>0&&O.cells.every(P=>A.has(P))&&(B.push(O.name),A=A.subtract(ee(O.cells)));for(;A.size>0;){const O=A.first(),[P,X]=O.toArray();B.push(`${s[P][0]}+${n[X][0]}`),A=A.delete(O)}return console.assert(A.size==0),B.join(" or ")}const k=[];R.size>0&&k.push(new Ut(T(),A=>R.some(B=>{const[U,O]=B.toArray(),P=s[U][1],X=n[O][1];return P(A)&&X(A)}),t,{selectedCells:R}));const I=new Map(o);I.set(t,k),l(I)},j=Math.max(...g.map(h=>tt(s[h][0],"tyche__mosaic__row-header").width)),v=Math.max(..._.map(h=>tt(n[h][0],"tyche__mosaic__column-header").height)),N=Math.max(...g.map(h=>tt(p[h].toString(),"tyche__mosaic__row-total").width));if(g.length===0||_.length===0)return r.jsx("div",{children:"No observations"});const $=30,w=30,M=45*g.length;for(let h=0;h<s.length;h++)for(let S=0;S<n.length;S++)f[h][S].widthPercent=p[h]>0?f[h][S].count/p[h]*100:0;const L=g.map(h=>p[h]/b*M).map(h=>Math.max(h,w)),C=_.map((h,S)=>S===0?0:S===_.length-1?100:S/(_.length-1)*100),E=Ct-j-N;return g.forEach(h=>{const S=_.map(T=>f[h][T]);if(S.reduce((T,k)=>T+k.widthPercent,0)>0){const k=S.map(A=>A.widthPercent/100*E).map((A,B)=>S[B].count>0&&A>0&&A<$?$:A),I=k.reduce((A,B)=>A+B,0);_.forEach((A,B)=>{f[h][A].widthPercent=I>0?k[B]/I*100:0})}}),r.jsxs("div",{className:"tyche__mosaic__container",style:{maxWidth:`${Ct}px`},children:[r.jsx("div",{className:"tyche__mosaic__column-headers",style:{marginLeft:`${j}px`,marginRight:`${N}px`,height:`${v}px`},children:_.map((h,S)=>{const R=S===0,T=S===_.length-1;return r.jsx("div",{className:"tyche__mosaic__column-header",style:{left:`${C[S]}%`,transform:R?"translateX(0%)":T?"translateX(-100%)":"translateX(-50%)",textAlign:R?"left":T?"right":"center"},onClick:()=>y(null,h),children:n[h][0]},`header-${h}`)})}),g.map((h,S)=>r.jsxs("div",{className:"tyche__mosaic__row",style:{height:`${L[S]}px`},children:[r.jsx("div",{className:"tyche__mosaic__row-header",style:{width:`${j}px`,cursor:"pointer"},onClick:()=>y(h,null),children:s[h][0]}),r.jsx("div",{className:"tyche__mosaic__row-cells",children:_.map(R=>{const T=f[h][R];if(T.count===0)return null;const k=d.has(xe([h,R])),I=`${s[h][0]} and ${n[R][0]}<br>Count: ${T.count}`;return r.jsx("div",{className:`tyche__mosaic__cell${k?" tyche__mosaic__cell--selected":""}`,style:{width:`${T.widthPercent}%`,minWidth:`${$}px`,minHeight:`${w}px`,...i(s[h][0],n[R][0])},onClick:()=>y(h,R),onMouseEnter:A=>a(I,A.clientX,A.clientY,"tyche-mosaic"),onMouseMove:A=>m(A.clientX,A.clientY,"tyche-mosaic"),onMouseLeave:()=>c("tyche-mosaic"),children:r.jsx("span",{className:"tyche__mosaic__cell-value",children:T.count})},`cell-${h}-${R}`)})}),r.jsx("div",{className:"tyche__mosaic__row-total",style:{width:`${N}px`},children:p[h]})]},`row-${h}`)),r.jsxs("div",{className:"tyche__mosaic__column-totals-row",style:{height:`${v}px`},children:[r.jsx("div",{style:{width:`${j}px`}}),r.jsx("div",{className:"tyche__mosaic__column-totals",style:{marginRight:`${N}px`},children:_.map((h,S)=>{const R=S===0,T=S===_.length-1;return r.jsx("div",{className:"tyche__mosaic__column-total",style:{left:`${C[S]}%`,transform:R?"translateX(0%)":T?"translateX(-100%)":"translateX(-50%)",textAlign:R?"left":T?"right":"center"},children:x[h]},`total-${h}`)})}),r.jsx("div",{className:"tyche__mosaic__grand-total",style:{width:`${N}px`},children:b})]})]})}function wn(t){const e=V.c(5),{observations:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=function(m,u){const d={};return m==="Passed"?d.backgroundColor=se.SUCCESS:m==="Invalid"?d.backgroundColor=se.WARNING:m==="Failed"&&(d.backgroundColor=se.ERROR),u==="Duplicate"&&(d.opacity=.7),d},e[0]=n):n=e[0];const i=n;let o,l;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=[["Passed",kn],["Invalid",Cn]],l=[["Unique",$n],["Duplicate",Nn]],e[1]=o,e[2]=l):(o=e[1],l=e[2]);let a;return e[3]!==s?(a=r.jsx(mt,{title:"Samples",children:r.jsx(Sn,{name:"samples",observations:s,verticalAxis:o,horizontalAxis:l,cssStyle:i})}),e[3]=s,e[4]=a):a=e[4],a}function Nn(t){return t.isDuplicate??!1}function $n(t){return t.isUnique??!1}function Cn(t){return t.status==="gave_up"}function kn(t){return t.status==="passed"}const He="Present",Ye="Not present";var se=(t=>(t.PRIMARY="#6b8ab5",t.SUCCESS="#8ba86b",t.WARNING="#d59a7e",t.ERROR="#c77a7e",t.ACCENT="#c1a2bb",t.ACCENT2="#9fc7c6",t.ACCENT3="#edd39a",t.ACCENT4="#99c7d6",t.ACCENT5="#8faac6",t))(se||{});function Rn(t){const e=V.c(25),{test:s}=t,{filters:n,observationCategory:i,setObservationCategory:o}=We();let l;e[0]!==i||e[1]!==s.corpus_observations||e[2]!==s.rolling_observations?(l=i==="rolling"?s.rolling_observations.sortKey(En):s.corpus_observations,e[0]=i,e[1]=s.corpus_observations,e[2]=s.rolling_observations,e[3]=l):l=e[3];const a=l;let c;e[4]!==n||e[5]!==a?(c=function(){const N=Array.from(n.values()).flat();return N.length===0?a:a.filter($=>N.every(w=>w.predicate($)))},e[4]=n,e[5]=a,e[6]=c):c=e[6];const m=c;let u;e[7]!==m?(u=m(),e[7]=m,e[8]=u):u=e[8];let d;e[9]!==a||e[10]!==u?(d={raw:a,filtered:u},e[9]=a,e[10]=u,e[11]=d):d=e[11];const f=d;let p,x;e[12]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx("div",{className:"card__header",children:r.jsx("span",{children:"Observations"})}),x={paddingTop:"10px",paddingBottom:"10px",display:"flex",fontSize:"1.05rem",fontWeight:"500"},e[12]=p,e[13]=x):(p=e[12],x=e[13]);let b;e[14]===Symbol.for("react.memo_cache_sentinel")?(b=[{value:"covering",content:"Covering"},{value:"rolling",content:"Rolling"}],e[14]=b):b=e[14];let g;e[15]!==i||e[16]!==o?(g=r.jsx("div",{style:x,children:r.jsx(ve,{value:i,onChange:o,options:b})}),e[15]=i,e[16]=o,e[17]=g):g=e[17];let _;e[18]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(pn,{}),e[18]=_):_=e[18];let y;e[19]!==i||e[20]!==f?(y=f.raw.length>0?r.jsxs(r.Fragment,{children:[r.jsx(wn,{observations:f}),r.jsx(_n,{observations:f}),r.jsx(bn,{observations:f,observationCategory:i})]}):r.jsx("div",{className:"tyche__section",children:"No observations"}),e[19]=i,e[20]=f,e[21]=y):y=e[21];let j;return e[22]!==y||e[23]!==g?(j=r.jsxs("div",{className:"card",children:[p,g,_,y]}),e[22]=y,e[23]=g,e[24]=j):j=e[24],j}function En(t){return-t.run_start}function An(t){const e=V.c(2),{test:s}=t;let n;return e[0]!==s?(n=r.jsx(Qs,{children:r.jsx(Rn,{test:s})}),e[0]=s,e[1]=n):n=e[1],n}const kt=["Skipped","SkipTest"];class Te{withProperties(e){return Object.assign(Object.create(this.constructor.prototype),this,e)}}class dt extends Te{constructor(e,s){super(),this.state=e,this.observation=s}static fromJson(e){return new dt(e.state,Ee.fromJson(e.observation))}}class _e extends Te{constructor(e=new Map([[0,0],[1,0],[2,0],[3,0]])){super(),this.counts=e}static fromJson(e){const s=new Map([[0,0],[1,0],[2,0],[3,0]]);for(const[n,i]of Object.entries(e))console.assert(typeof i=="number"),s.set(Number(n),i);return new _e(s)}add(e){const s=new Map(this.counts);for(const[n,i]of e.counts.entries())s.set(n,s.get(n)+i);return new _e(s)}subtract(e){const s=new Map(this.counts);for(const[n,i]of e.counts.entries())s.set(n,s.get(n)-i);return new _e(s)}sum(){return Ht(this.counts.values())}}var ot=(t=>(t.GENERATE="generate",t.REPLAY="replay",t.DISTILL="distill",t.SHRINK="shrink",t.FAILED="failed",t))(ot||{});class ze extends Te{constructor(s,n,i,o,l,a,c,m){super();ne(this,"status_counts_diff");ne(this,"elapsed_time_diff");ne(this,"timestamp_monotonic");this.elapsed_time=s,this.timestamp=n,this.status_counts=i,this.behaviors=o,this.fingerprints=l,this.since_new_behavior=a,this.phase=c,this.worker_uuid=m,this.status_counts_diff=null,this.elapsed_time_diff=null,this.timestamp_monotonic=null}get ninputs(){return this.status_counts.sum()}static fromJson(s,n){return new ze(n.elapsed_time,n.timestamp,_e.fromJson(n.status_counts),n.behaviors,n.fingerprints,n.since_new_behavior,n.phase,s)}}class Ee extends Te{constructor(s,n,i,o,l,a,c,m,u,d,f){super();ne(this,"isDuplicate",null);ne(this,"isUnique",null);this.type=s,this.status=n,this.status_reason=i,this.representation=o,this.arguments_=l,this.how_generated=a,this.features=c,this.timing=m,this.metadata=u,this.property=d,this.run_start=f}static fromJson(s){return new Ee(s.type,s.status,s.status_reason,s.representation,new Map(Object.entries(s.arguments)),s.how_generated,new Map(Object.entries(s.features)),new Map(Object.entries(s.timing)),new Map(Object.entries(s.metadata)),s.property,Number(s.run_start))}}var Z=(t=>(t[t.FAILED_FATALLY=0]="FAILED_FATALLY",t[t.FAILED=1]="FAILED",t[t.SHRINKING=2]="SHRINKING",t[t.RUNNING=3]="RUNNING",t[t.SKIPPED_DYNAMICALLY=4]="SKIPPED_DYNAMICALLY",t[t.WAITING=5]="WAITING",t))(Z||{});function Rt(t,e){const s=e?e.status_counts:new _e,n=e?e.elapsed_time:0,i=t.status_counts.subtract(s),o=t.elapsed_time-n,l=e?Math.max(t.timestamp,e.timestamp_monotonic+o):t.timestamp;return console.assert(Array.from(i.counts.values()).every(a=>a>=0)),console.assert(o>=0),t.withProperties({status_counts_diff:i,elapsed_time_diff:o,timestamp_monotonic:l})}const Ce=class Ce extends Te{constructor(s,n,i,o,l,a,c){super();ne(this,"linear_reports");ne(this,"_status_counts_cumsum");ne(this,"_elapsed_time_cumsum");ne(this,"load_finished_at",null);this.database_key=s,this.nodeid=n,this.rolling_observations=i,this.corpus_observations=o,this.failures=l,this.fatal_failure=a,this.reports_by_worker=c,this.linear_reports=[],this._status_counts_cumsum=new Map,this._elapsed_time_cumsum=new Map,this.load_finished_at=null;const m=this.reports_by_worker;this.reports_by_worker=new Map;const u=Array.from(m.entries()).flatMap(([d,f])=>f.map(p=>[d,p])).sortKey(([d,f])=>f.timestamp);for(const[d,f]of u)this.add_report(d,f);this._check_invariants()}static fromJson(s){return new Ce(s.database_key,s.nodeid,[],[],new Map(Object.entries(s.failures).map(([n,i])=>[n,dt.fromJson(i)])),s.fatal_failure,new Map(Object.entries(s.reports_by_worker).map(([n,i])=>[n,i.map(ze.fromJson)])))}_assert_reports_ordered(s){for(let n=0;n<s.length-1;n++)console.assert(s[n].timestamp_monotonic<=s[n+1].timestamp_monotonic)}_check_invariants(){this._assert_reports_ordered(this.linear_reports);const s=this.linear_status_counts(null);for(let i=0;i<s.length-1;i++)console.assert(s[i].sum()<=s[i+1].sum());const n=this.linear_elapsed_time(null);for(let i=0;i<n.length-1;i++)console.assert(n[i]<=n[i+1]);console.assert(n.length===s.length&&s.length===this.linear_reports.length);for(const[i,o]of this.reports_by_worker.entries())this._assert_reports_ordered(o)}add_report(s,n){let i=null,o=0;if(this.reports_by_worker.has(s)){const a=this.reports_by_worker.get(s);o=et(a,n.elapsed_time,c=>c.elapsed_time),i=o!=0?a[o-1]:null}const l=Rt(n,i);if(this.reports_by_worker.has(s)||this.reports_by_worker.set(s,[]),this.reports_by_worker.get(s).splice(o,0,l),l.phase!==ot.REPLAY||l.behaviors>=this.behaviors&&l.fingerprints>=this.fingerprints){const a=et(this.linear_reports,l.timestamp_monotonic,c=>c.timestamp_monotonic);if(this.linear_reports.splice(a,0,l),a!=this.linear_reports.length-1){let c=null,m;for(m=0;m<this.linear_reports.length-(a+1);m++){const u=this.linear_reports[a+1+m];if(l.worker_uuid===u.worker_uuid){c=u;break}}c&&(console.assert(this.linear_reports[a+1+m]===c),this.linear_reports[a+1+m]=Rt(c,l));for(const u of[this._status_counts_cumsum,this._elapsed_time_cumsum])for(const[d,[f,p]]of u.entries())a>=f&&u.set(d,[f,p.slice(0,a-f)])}}}get normalFailures(){return Array.from(this.failures.entries()).filter(([s,n])=>!kt.some(i=>s.includes(`${i} at`))).map(([s,n])=>n)}get skipFailures(){return Array.from(this.failures.entries()).filter(([s,n])=>kt.some(i=>s.includes(`${i} at`))).map(([s,n])=>n)}get status(){if(this.skipFailures.length>0)return Z.SKIPPED_DYNAMICALLY;if(this.fatal_failure)return Z.FAILED_FATALLY;if(this.failures.size>0)return Z.FAILED;if(this.linear_reports.length===0)return Z.WAITING;const s=this.linear_reports[this.linear_reports.length-1],n=new Date().getTime()/1e3;return s.phase==ot.SHRINK?Z.SHRINKING:s.ninputs===0||s.timestamp<n-Ce.WAITING_STATUS_DURATION?Z.WAITING:Z.RUNNING}get behaviors(){return this.linear_reports.length===0?0:this.linear_reports[this.linear_reports.length-1].behaviors}get fingerprints(){return this.linear_reports.length===0?0:this.linear_reports[this.linear_reports.length-1].fingerprints}get since_new_behavior(){return this.linear_reports.length===0?null:this.linear_reports[this.linear_reports.length-1].since_new_behavior}elapsed_time(s){const n=this.linear_elapsed_time(s);return n.length===0?0:n[n.length-1]}ninputs(s){const n=this.linear_status_counts(s);return n.length===0?0:n[n.length-1].sum()}_cumsum(s,n,i,o,l){if(o===null&&(o=-1/0),s.has(o)){const[u,d]=s.get(o);if(d.length<this.linear_reports.slice(u).length){let f=d.length>0?d[d.length-1]:l;for(const p of this.linear_reports.slice(u+d.length))f=i(f,p[n]),d.push(f);s.set(o,[u,d])}return d}const a=[],c=et(this.linear_reports,o,u=>u.timestamp_monotonic);let m=l;for(const u of this.linear_reports.slice(c))m=i(m,u[n]),a.push(m);return s.set(o,[c,a]),a}linear_status_counts(s){return this._cumsum(this._status_counts_cumsum,"status_counts_diff",(n,i)=>n.add(i),s,new _e)}linear_elapsed_time(s){return this._cumsum(this._elapsed_time_cumsum,"elapsed_time_diff",(n,i)=>n+i,s,0)}};ne(Ce,"WAITING_STATUS_DURATION",120);let lt=Ce;const Jt=D.createContext(null);function Et(t){const e=new Map;t.forEach(n=>{e.set(n.representation,(e.get(n.representation)||0)+1)}),t.forEach(n=>{const i=e.get(n.representation);n.isUnique=i==1,n.isDuplicate=i>1});const s=new Set;t.forEach(n=>{n.features.forEach((i,o)=>{s.add(o)})}),t.forEach(n=>{s.forEach(i=>{n.features.has(i)||n.features.set(i,Ye)});for(const[i,o]of n.features)o===""&&n.features.set(i,He)})}function Tn(t,e){const s=new Map(t);function n(i){if(s.has(i))return s.get(i);{const o=new lt(null,i,[],[],new Map,null,new Map);return s.set(o.nodeid,o),o}}switch(e.type){case 1:return t;case 2:{const{tests:i}=e;for(const{database_key:o,nodeid:l,failures:a,fatal_failure:c}of i){const m=n(l);m.database_key=o,a.forEach((u,d)=>{m.failures.set(d,u)}),m.fatal_failure=c}return s}case 3:{const{nodeid:i,worker_uuid:o,reports:l}=e,a=n(i);for(const c of l)a.add_report(o,c);return s}case 5:{const{nodeid:i,failures:o}=e,l=n(i);return o.forEach((a,c)=>{l.failures.set(c,a)}),s}case 4:{const{nodeid:i,observation_type:o,observations:l}=e,a=n(i);return o==="rolling"?(a.rolling_observations.push(...l),a.rolling_observations=a.rolling_observations.sortKey(c=>-c.run_start).slice(0,300),Et(a.rolling_observations)):(console.assert(o==="corpus"),a.corpus_observations.push(...l),Et(a.corpus_observations)),s}case 7:{const{nodeid:i}=e,o=n(i);return o.load_finished_at=Date.now(),s}default:throw new Error("non-exhaustive switch in testsReducer")}}function Mn(t){const e=V.c(26),{children:s}=t,[n,i]=D.useState(null);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=new Map,e[0]=o):o=e[0];const[l,a]=D.useReducer(Tn,o),[c,m]=D.useState(!1),[u,d]=D.useState(null);let f;e[1]===Symbol.for("react.memo_cache_sentinel")?(f={count_tests:null,count_tests_loaded:null},e[1]=f):f=e[1];const[p,x]=D.useState(f),{addNotification:b,updateNotification:g,dismissNotification:_}=Js();D.useRef(null);let y;e[2]===Symbol.for("react.memo_cache_sentinel")?(y=L=>{m(!0),d(L)},e[2]=y):y=e[2];const j=y;let v;e[3]!==p||e[4]!==l?(v=()=>{const L=Date.now();return p.count_tests_loaded!==null&&p.count_tests!==null&&p.count_tests_loaded===p.count_tests&&Array.from(l.values()).every(C=>C.load_finished_at===null?!1:L-C.load_finished_at>200)},e[3]=p,e[4]=l,e[5]=v):v=e[5];const N=v;let $;e[6]!==b||e[7]!==_||e[8]!==c||e[9]!==u||e[10]!==l||e[11]!==g?($=()=>{if(c){l.clear(),x({count_tests:null,count_tests_loaded:null});{fetch(new URL("dashboard_state/tests.json",import.meta.url)).then(Dn).then(Pn).then(C=>{Object.entries(C).forEach(E=>{const[h,S]=E;a({type:2,tests:[{database_key:S.database_key,nodeid:h,failures:S.failures,fatal_failure:S.fatal_failure}]});for(const[R,T]of Object.entries(S.reports_by_worker))a({type:3,nodeid:h,worker_uuid:R,reports:T.map(k=>ze.fromJson(R,k))});a({type:7,nodeid:h})})});const L=new Worker(new URL("/preview-211/example-dashboard/assets/jsonWorker-KJVNTzbb.js",import.meta.url));return fetch(new URL("dashboard_state/observations.json",import.meta.url)).then(Ln).then(C=>new Promise(E=>{L.onmessage=h=>E(h.data),L.postMessage(C)})).then(C=>{for(const[E,h]of Object.entries(C))a({type:4,nodeid:E,observation_type:"rolling",observations:h.rolling.map(Ee.fromJson)}),a({type:4,nodeid:E,observation_type:"corpus",observations:h.corpus.map(Ee.fromJson)})}),()=>L.terminate()}}},e[6]=b,e[7]=_,e[8]=c,e[9]=u,e[10]=l,e[11]=g,e[12]=$):$=e[12];let w;e[13]!==b||e[14]!==_||e[15]!==c||e[16]!==u||e[17]!==g?(w=[u,c,b,_,g],e[13]=b,e[14]=_,e[15]=c,e[16]=u,e[17]=g,e[18]=w):w=e[18],D.useEffect($,w);let M;e[19]!==n||e[20]!==l||e[21]!==N?(M={tests:l,socket:n,doLoadData:j,testsLoaded:N},e[19]=n,e[20]=l,e[21]=N,e[22]=M):M=e[22];let F;return e[23]!==s||e[24]!==M?(F=r.jsx(Jt.Provider,{value:M,children:s}),e[23]=s,e[24]=M,e[25]=F):F=e[25],F}function Ln(t){return t.text()}function Pn(t){return JSON.parse(t)}function Dn(t){return t.text()}function ht(t){const e=V.c(4),s=t===void 0?null:t,n=D.useContext(Jt);if(!n)throw new Error("useData must be used within a DataProvider");let i,o;return e[0]!==n||e[1]!==s?(i=()=>{n.doLoadData(s)},o=[s,n],e[0]=n,e[1]=s,e[2]=i,e[3]=o):(i=e[2],o=e[3]),D.useEffect(i,o),n}function Le(t){const e=V.c(9),{to:s,icon:n,children:i,isActive:o}=t,l=ct(),a=`sidebar__link ${o(l.pathname)?"sidebar__link--active":""}`;let c;e[0]!==n?(c=r.jsx("span",{className:"sidebar__link__icon",children:n}),e[0]=n,e[1]=c):c=e[1];let m;e[2]!==i||e[3]!==a||e[4]!==c?(m=r.jsxs("div",{className:a,children:[c,i]}),e[2]=i,e[3]=a,e[4]=c,e[5]=m):m=e[5];let u;return e[6]!==m||e[7]!==s?(u=r.jsx(pe,{to:s,className:"sidebar__link__text",children:m}),e[6]=m,e[7]=s,e[8]=u):u=e[8],u}function Fn(){const t=V.c(24),e=ct(),[s,n]=D.useState(!1),i=D.useRef(null);let o,l;t[0]!==s?(o=()=>{const $=function(M){var F;s&&((F=i.current)==null?void 0:F.contains(M.target))===!1&&n(!1)};return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},l=[s],t[0]=s,t[1]=o,t[2]=l):(o=t[1],l=t[2]),D.useEffect(o,l);let a;t[3]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{n(!1)},t[3]=a):a=t[3];let c;t[4]!==e?(c=[e],t[4]=e,t[5]=c):c=t[5],D.useEffect(a,c);let m;t[6]!==s?(m=!s&&r.jsx("div",{className:"toggle-sidebar",onClick:()=>n(!0),children:r.jsx(W,{icon:ys,size:"lg"})}),t[6]=s,t[7]=m):m=t[7];let u;t[8]!==s?(u=s&&r.jsx("div",{className:"opacity-overlay"}),t[8]=s,t[9]=u):u=t[9];const d=`sidebar ${s?"sidebar--open":""}`;let f;t[10]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(pe,{to:"/",className:"sidebar__title",children:"HypoFuzz"}),t[10]=f):f=t[10];let p;t[11]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(Le,{to:"/",isActive:Xn,icon:r.jsx(W,{icon:vs}),children:"Tests"}),t[11]=p):p=t[11];let x;t[12]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(Le,{icon:r.jsx(W,{icon:js}),to:"/patches",isActive:Bn,children:"Patches"}),t[12]=x):x=t[12];let b;t[13]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(Le,{icon:r.jsx(W,{icon:Ss}),to:"/collected",isActive:On,children:"Collection"}),t[13]=b):b=t[13];let g,_;t[14]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(Le,{icon:r.jsx(W,{icon:rt}),to:"/workers",isActive:In,children:"Workers"}),_=r.jsx("div",{className:"sidebar__separator"}),t[14]=g,t[15]=_):(g=t[14],_=t[15]);let y;t[16]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsxs("nav",{className:"sidebar__nav",children:[p,x,b,g,_,r.jsx("a",{href:`${"/preview-211/example-dashboard".replace(/\/$/,"")}/docs/`,className:"sidebar__link__text",children:r.jsxs("div",{className:"sidebar__link",children:[r.jsx("span",{className:"sidebar__link__icon",children:r.jsx(W,{icon:ws})}),"Docs"]})})]}),t[16]=y):y=t[16];let j;t[17]!==d?(j=r.jsxs("div",{ref:i,className:d,children:[f,y]}),t[17]=d,t[18]=j):j=t[18];let v;t[19]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("div",{className:"content",children:r.jsx(us,{})}),t[19]=v):v=t[19];let N;return t[20]!==j||t[21]!==m||t[22]!==u?(N=r.jsxs("div",{className:"layout",children:[m,u,j,v]}),t[20]=j,t[21]=m,t[22]=u,t[23]=N):N=t[23],N}function In(t){return t==="/workers"}function On(t){return t==="/collected"}function Bn(t){return t==="/patches"}function Xn(t){return t==="/"||t.startsWith("/tests/")}function _t(t){const e=V.c(42),{headers:s,data:n,row:i,mobileRow:o,getKey:l,onFilterChange:a,filterStrings:c}=t,[m,u]=D.useState(null),[d,f]=D.useState(0),[p,x]=D.useState(""),b=ut();let g;e[0]!==n||e[1]!==p||e[2]!==c||e[3]!==s||e[4]!==m||e[5]!==d?(g=function(){let h=n;if(p&&(h=n.filter(R=>c?c(R).some(T=>T.toLowerCase().includes(p.toLowerCase())):!0)),m===null)return h;const S=[...h].sortKey(R=>s[m].sortKey(R));return d===0?S:S.reverse()},e[0]=n,e[1]=p,e[2]=c,e[3]=s,e[4]=m,e[5]=d,e[6]=g):g=e[6];const _=g;let y;e[7]!==s||e[8]!==m?(y=E=>{s[E].sortKey&&(m===E?f(Un):(u(E),f(0)))},e[7]=s,e[8]=m,e[9]=y):y=e[9];const j=y;let v;e[10]!==a?(v=function(h){x(h),a==null||a(h)},e[10]=a,e[11]=v):v=e[11];const N=v;let $,w,M,F;e[12]!==N||e[13]!==p||e[14]!==c||e[15]!==_||e[16]!==l||e[17]!==j||e[18]!==s||e[19]!==b||e[20]!==o||e[21]!==i||e[22]!==m||e[23]!==d?($=_(),w="table",e[28]!==N||e[29]!==p||e[30]!==c?(M=c!==void 0&&r.jsxs("div",{className:"table__filter",children:[r.jsx("input",{type:"text",placeholder:"Filter",value:p,onChange:E=>N(E.target.value),className:"table__filter__input"}),p&&r.jsx("span",{className:"table__filter__clear",onClick:()=>N(""),children:r.jsx(W,{icon:Cs})})]}),e[28]=N,e[29]=p,e[30]=c,e[31]=M):M=e[31],F=o!==void 0&&b?$.map(E=>r.jsx("div",{children:o(E)},l?l(E):void 0)):r.jsxs("table",{className:"table__table",children:[r.jsx("thead",{children:r.jsx("tr",{children:s.map((E,h)=>r.jsx("th",{onClick:()=>j(h),className:E.sortKey?"table--sortable":"",children:r.jsxs("div",{className:`table__header table__header--${E.align??"left"}`,children:[E.content,E.sortKey&&r.jsx("div",{className:"table__sort",children:[0,1].map(S=>r.jsx("div",{className:`table__sort__arrow table__sort__arrow--${S===0?"asc":"desc"} ${m===h&&d===S?"table__sort__arrow--active":""}`,children:S===0?r.jsx(W,{icon:Ns}):r.jsx(W,{icon:$s})}))})]})},h))})}),r.jsx("tbody",{children:$.map(E=>{const h=i(E);return console.assert(h.length===s.length),r.jsx("tr",{children:h.map(Vn)},l?l(E):void 0)})})]}),e[12]=N,e[13]=p,e[14]=c,e[15]=_,e[16]=l,e[17]=j,e[18]=s,e[19]=b,e[20]=o,e[21]=i,e[22]=m,e[23]=d,e[24]=$,e[25]=w,e[26]=M,e[27]=F):($=e[24],w=e[25],M=e[26],F=e[27]);let L;e[32]!==n||e[33]!==$||e[34]!==p||e[35]!==a?(L=p&&$.length<n.length&&r.jsxs("div",{className:"table__filter-status",children:["Showing ",$.length," of ",n.length," rows",r.jsx("span",{className:"table__filter-status__clear",onClick:()=>{x(""),a==null||a("")},children:"[clear]"})]}),e[32]=n,e[33]=$,e[34]=p,e[35]=a,e[36]=L):L=e[36];let C;return e[37]!==w||e[38]!==M||e[39]!==F||e[40]!==L?(C=r.jsxs("div",{className:w,children:[M,F,L]}),e[37]=w,e[38]=M,e[39]=F,e[40]=L,e[41]=C):C=e[41],C}function Vn(t,e){return r.jsx("td",{children:t},e)}function Un(t){return t===0?1:0}async function pt(t){return await(await fetch(new URL("dashboard_state/api.json",import.meta.url))).json()}async function Wn(t){var s;const e=await pt();return(s=e==null?void 0:e.patches)==null?void 0:s[t]}async function Zt(){const t=await pt();return t==null?void 0:t.available_patches}async function Kn(){const t=await pt();return t==null?void 0:t.collection_status}const Qt={not_collected:0,collected:1};function Hn(){const t=V.c(9),[e,s]=D.useState(null);let n,i;if(t[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{Kn().then(f=>{s(f)})},i=[],t[0]=n,t[1]=i):(n=t[0],i=t[1]),D.useEffect(n,i),e===null)return null;if(!e.length){let f;return t[2]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card__header",children:"Test collection"}),"No tests collected."]}),t[2]=f):f=t[2],f}let o;t[3]!==e?(o=[...e].sortKey(Zn),t[3]=e,t[4]=o):o=t[4];const l=o;let a;t[5]===Symbol.for("react.memo_cache_sentinel")?(a=[{content:"Test",sortKey:Jn},{content:"Status",sortKey:qn,align:"center"}],t[5]=a):a=t[5];const c=a,m=Gn;let u;t[6]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("div",{className:"card__header",children:"Test collection status"}),t[6]=u):u=t[6];let d;return t[7]!==l?(d=r.jsxs("div",{className:"card",children:[u,r.jsx(_t,{headers:c,data:l,row:m,getKey:zn,filterStrings:Yn})]}),t[7]=l,t[8]=d):d=t[8],d}function Yn(t){return[t.nodeid,t.status==="collected"?"Collected":`Not collected (${t.status_reason})`]}function zn(t){return t.database_key}function Gn(t){return[r.jsx("div",{style:{wordBreak:"break-all"},children:t.status=="collected"?r.jsx(pe,{to:`/tests/${encodeURIComponent(t.nodeid)}`,className:"test__link",children:t.nodeid}):t.nodeid}),r.jsx("div",{style:{textAlign:"center"},children:t.status==="collected"?r.jsx("div",{className:"pill pill__success",children:"Collected"}):r.jsxs("div",{className:"pill pill__neutral",children:["Not collected (",t.status_reason,")"]})})]}function qn(t){return[Qt[t.status],t.status_reason]}function Jn(t){return t.nodeid}function Zn(t){return[Qt[t.status],t.status_reason,t.nodeid]}function Qn(){const t=V.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("h1",{children:"Page not found!"}),t[0]=e):e=t[0],e}function er(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}Ae.registerLanguage("diff",er);function es(t){const e=V.c(61),{nodeid:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={},e[0]=n):n=e[0];const[i,o]=D.useState(n),[l,a]=D.useState(!0),[c,m]=D.useState(null),[u,d]=D.useState(!1),f=D.useRef(null);let p,x;e[1]!==s?(p=()=>{Wn(s).then(P=>{P&&o(P),a(!1)})},x=[s],e[1]=s,e[2]=p,e[3]=x):(p=e[2],x=e[3]),D.useEffect(p,x);let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{Yt(f,!0)},e[4]=b):b=e[4];let g;if(e[5]!==c||e[6]!==i?(g=[i,c],e[5]=c,e[6]=i,e[7]=g):g=e[7],D.useEffect(b,g),l){let P;return e[8]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx("div",{className:"card",children:r.jsx("p",{children:"Loading patches..."})}),e[8]=P):P=e[8],P}if(Object.values(i).every(sr)){let P;return e[9]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx("div",{className:"card",children:r.jsx("p",{children:"No patches for this test"})}),e[9]=P):P=e[9],P}let _,y,j,v,N,$,w,M,F;if(e[10]!==s||e[11]!==c||e[12]!==i){const P=new Map([["failing","Failing"],["covering","Covering"]]),X=c??Array.from(P.keys()).find(K=>i[K]);v=i[X];let z;e[22]!==v?(z=async()=>{await navigator.clipboard.writeText(v),d(!0),setTimeout(()=>{d(!1)},2e3)},e[22]=v,e[23]=z):z=e[23],y=z;let H;e[24]!==X||e[25]!==s||e[26]!==v?(H=()=>{const K=new Blob([v],{type:"text/plain"}),te=URL.createObjectURL(K),G=document.createElement("a");G.href=te,G.download=`${X}-${s.split("::").pop()}.patch`,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(te)},e[24]=X,e[25]=s,e[26]=v,e[27]=H):H=e[27],j=H,N=f,e[28]===Symbol.for("react.memo_cache_sentinel")?(F={paddingTop:"10px",paddingBottom:"10px",display:"flex",fontSize:"1.05rem",fontWeight:"500"},e[28]=F):F=e[28],_=ve,w=X,M=m,$=Array.from(P.entries()),e[10]=s,e[11]=c,e[12]=i,e[13]=_,e[14]=y,e[15]=j,e[16]=v,e[17]=N,e[18]=$,e[19]=w,e[20]=M,e[21]=F}else _=e[13],y=e[14],j=e[15],v=e[16],N=e[17],$=e[18],w=e[19],M=e[20],F=e[21];let L;e[29]!==i||e[30]!==$?(L=$.filter(P=>{const[X]=P;return i[X]}).map(tr),e[29]=i,e[30]=$,e[31]=L):L=e[31];let C;e[32]!==_||e[33]!==L||e[34]!==w||e[35]!==M?(C=r.jsx(_,{value:w,onChange:M,options:L}),e[32]=_,e[33]=L,e[34]=w,e[35]=M,e[36]=C):C=e[36];let E;e[37]!==C||e[38]!==F?(E=r.jsx("div",{style:F,children:C}),e[37]=C,e[38]=F,e[39]=E):E=e[39];const h=`patch__controls__control ${u?"patch__controls__control--success":""}`,S=u?ks:Rs;let R;e[40]!==S?(R=r.jsx(W,{icon:S}),e[40]=S,e[41]=R):R=e[41];let T;e[42]!==y||e[43]!==h||e[44]!==R?(T=r.jsx("div",{className:h,onClick:y,title:"Copy patch",children:R}),e[42]=y,e[43]=h,e[44]=R,e[45]=T):T=e[45];let k;e[46]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx(W,{icon:Es}),e[46]=k):k=e[46];let I;e[47]!==j?(I=r.jsx("div",{className:"patch__controls__control",onClick:j,title:"Download patch",children:k}),e[47]=j,e[48]=I):I=e[48];let A;e[49]!==T||e[50]!==I?(A=r.jsxs("div",{className:"patch__controls",children:[T,I]}),e[49]=T,e[50]=I,e[51]=A):A=e[51];let B;e[52]!==v?(B=r.jsx("code",{className:"language-diff",children:v}),e[52]=v,e[53]=B):B=e[53];let U;e[54]!==A||e[55]!==B?(U=r.jsxs("pre",{className:"patch__pre",children:[A,B]}),e[54]=A,e[55]=B,e[56]=U):U=e[56];let O;return e[57]!==N||e[58]!==E||e[59]!==U?(O=r.jsxs("div",{ref:N,children:[E,U]}),e[57]=N,e[58]=E,e[59]=U,e[60]=O):O=e[60],O}function tr(t){const[e,s]=t;return{value:e,content:s}}function sr(t){return t===null}function nr(){const t=V.c(8),[e,s]=D.useState(null);let n,i;if(t[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{Zt().then(c=>{s(c)})},i=[],t[0]=n,t[1]=i):(n=t[0],i=t[1]),D.useEffect(n,i),e===null||e.length===0){let c;return t[2]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card__header",children:"Patches"}),r.jsx("p",{children:"No tests with patches present."})]}),t[2]=c):c=t[2],c}let o;t[3]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx("div",{className:"card__header",style:{marginBottom:"1rem"},children:"Patches"}),t[3]=o):o=t[3];let l;t[4]!==e?(l=e.map(rr),t[4]=e,t[5]=l):l=t[5];let a;return t[6]!==l?(a=r.jsxs("div",{className:"card",children:[o,l]}),t[6]=l,t[7]=a):a=t[7],a}function rr(t){return r.jsx(ft,{title:r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("span",{children:t}),r.jsxs(pe,{to:`/tests/${encodeURIComponent(t)}`,className:"patches__test__link",style:{marginLeft:"8px"},children:["View test ",r.jsx(W,{icon:As})]})]}),headerClass:"patches__test",defaultState:"closed",children:r.jsx(es,{nodeid:t})})}function ir(t){return t>=1e6?`${Math.floor(t/1e6)}M`:t>=1e3?`${Math.floor(t/1e3)}k`:t>0?t.toLocaleString():"0"}function or(t){const e=[0];let s=1;for(;s<=t;)e.push(s),s*=10;return e}function lr({baseScale:t,tickCount:e,isLogScale:s,zoomTransform:n,orientation:i}){const o=t.domain(),l=t.range();let a;if(n){const u=i==="bottom",d=u?n.scaleX:1,f=u?n.x:n.y,p=l[0],x=l[l.length-1],b=t.invert((p-f)/d),g=t.invert((x-f)/d);a=[Math.min(b,g),Math.max(b,g)]}else a=[o[0],o[1]];let c;if(s)c=or(a[1]).filter(u=>u>=a[0]&&u<=a[1]);else{const u=s?it():ke();u.domain(a).range(l),c=u.ticks(e)}return c.map(u=>{const d=t(u);let f=d;return n&&i==="bottom"&&(f=d*n.scaleX+n.x),{value:u,offset:f,formatted:s?ir(u):u.toLocaleString()}})}function At(t){const e=V.c(27),{baseScale:s,orientation:n,tickCount:i,transform:o,isLogScale:l,zoomTransform:a}=t,c=i===void 0?5:i,m=l===void 0?!1:l;let u;if(e[0]!==s||e[1]!==m||e[2]!==n||e[3]!==c||e[4]!==o||e[5]!==a){const d=lr({baseScale:s,tickCount:c,isLogScale:m,zoomTransform:a,orientation:n}),f=n==="bottom";let p;e[7]!==s||e[8]!==f?(p=f?[0,0,s.range()[1],0]:[0,0,0,s.range()[0]],e[7]=s,e[8]=f,e[9]=p):p=e[9];const[x,b,g,_]=p;let y;e[10]!==x||e[11]!==g||e[12]!==b||e[13]!==_?(y=r.jsx("line",{className:"domain",x1:x,y1:b,x2:g,y2:_,stroke:"currentColor",strokeWidth:1}),e[10]=x,e[11]=g,e[12]=b,e[13]=_,e[14]=y):y=e[14];const j=x,v=b,N=f?x:x-6,$=f?b+6:b;let w;e[15]!==j||e[16]!==v||e[17]!==N||e[18]!==$?(w=r.jsx("line",{className:"domain",x1:j,y1:v,x2:N,y2:$,stroke:"currentColor",strokeWidth:1}),e[15]=j,e[16]=v,e[17]=N,e[18]=$,e[19]=w):w=e[19];const M=g,F=_,L=f?g:g-6,C=f?_+6:_;let E;e[20]!==M||e[21]!==F||e[22]!==L||e[23]!==C?(E=r.jsx("line",{className:"domain",x1:M,y1:F,x2:L,y2:C,stroke:"currentColor",strokeWidth:1}),e[20]=M,e[21]=F,e[22]=L,e[23]=C,e[24]=E):E=e[24];let h;e[25]!==f?(h=(S,R)=>{const T=f?S.offset:0,k=f?0:S.offset,I=f?S.offset:-10,A=f?15:S.offset+4;return r.jsxs("g",{className:"tick",children:[r.jsx("line",{x1:T,y1:k,x2:T+(f?0:-6),y2:k+(f?6:0),stroke:"currentColor",strokeWidth:1}),r.jsx("text",{x:I,y:A,textAnchor:f?"middle":"end",fontSize:"12",fill:"currentColor",children:S.formatted})]},R)},e[25]=f,e[26]=h):h=e[26],u=r.jsxs("g",{className:`axis axis--${n}`,transform:o,children:[y,w,E,d.map(h)]}),e[0]=s,e[1]=m,e[2]=n,e[3]=c,e[4]=o,e[5]=a,e[6]=u}else u=e[6];return u}function ar(t){const e=V.c(18),{lines:s,viewportXScale:n,viewportYScale:i,xValue:o,yValue:l,navigate:a}=t,[c,m]=D.useState(null);let u;if(e[0]!==c||e[1]!==s||e[2]!==a||e[3]!==n||e[4]!==i||e[5]!==o||e[6]!==l){let d;e[8]!==n||e[9]!==o?(d=_=>n(o(_)),e[8]=n,e[9]=o,e[10]=d):d=e[10];let f;e[11]!==i||e[12]!==l?(f=_=>i(l(_)),e[11]=i,e[12]=l,e[13]=f):f=e[13];const p=Fs().x(d).y(f),x=s.map((_,y)=>({pathData:p(_.reports)||"",color:_.color,url:_.url,key:`line-${y}-${_.url||"no-url"}`}));let b;e[14]===Symbol.for("react.memo_cache_sentinel")?(b={pointerEvents:"auto"},e[14]=b):b=e[14];let g;e[15]!==c||e[16]!==a?(g=_=>r.jsx("path",{d:_.pathData,fill:"none",stroke:_.color,className:`coverage-line ${c===_.key?"coverage-line__selected":""}`,style:{cursor:_.url?"pointer":"default"},onMouseEnter:()=>m(_.key),onMouseLeave:()=>m(null),onClick:y=>{_.url&&zt(y,_.url,a)}},_.key),e[15]=c,e[16]=a,e[17]=g):g=e[17],u=r.jsx("g",{style:b,children:x.map(g)}),e[0]=c,e[1]=s,e[2]=a,e[3]=n,e[4]=i,e[5]=o,e[6]=l,e[7]=u}else u=e[7];return u}class Xe{constructor(e,s,n,i,o){this.nodeid=e,this.linear_status_counts=s,this.linear_elapsed_time=n,this.behaviors=i,this.fingerprints=o}static fromReport(e,s){return new Xe(e,s.status_counts,s.elapsed_time,s.behaviors,s.fingerprints)}}const Ne=new Map;function le(t,e){const s=V.c(11);let n;s[0]!==e||s[1]!==t?(n=()=>{const d=sessionStorage.getItem(t);return d===null?e:JSON.parse(d)},s[0]=e,s[1]=t,s[2]=n):n=s[2];const[i,o]=D.useState(n);let l,a;s[3]!==t?(l=()=>(Ne.has(t)||Ne.set(t,new Set),Ne.get(t).add(o),()=>{Ne.get(t).delete(o)}),a=[t],s[3]=t,s[4]=l,s[5]=a):(l=s[4],a=s[5]),D.useEffect(l,a);let c;s[6]!==t?(c=function(f){sessionStorage.setItem(t,JSON.stringify(f)),Ne.get(t).forEach(p=>p(f))},s[6]=t,s[7]=c):c=s[7];const m=c;let u;return s[8]!==m||s[9]!==i?(u=[i,m],s[8]=m,s[9]=i,s[10]=u):u=s[10],u}const cr={x:0,y:0,scaleX:1};function ur({zoomTransform:t,bounds:e,baseX:s,baseY:n}){if(!e)return t;let i={...t};if(e.xMin!==void 0||e.xMax!==void 0){const o=s.range(),l=o[0],a=o[1],c=s.invert((l-i.x)/i.scaleX),m=s.invert((a-i.x)/i.scaleX);e.xMin!==void 0&&c<e.xMin&&(i.x=l-s(e.xMin)*i.scaleX),e.xMax!==void 0&&m>e.xMax&&(i.x=a-s(e.xMax)*i.scaleX)}if(e.yMin!==void 0||e.yMax!==void 0){const o=n.range(),l=o[1],a=o[0];e.yMin!==void 0&&n.invert(a-i.y)<e.yMin&&(i.y=a-n(e.yMin)),e.yMax!==void 0&&n.invert(l-i.y)>e.yMax&&(i.y=l-n(e.yMax))}return i}function fr(t,e,s,n,i,o,l,a=cr,c){const m=_=>n==="time"?_.linear_elapsed_time:_.linear_status_counts.sum(),u=_=>i==="behaviors"?_.behaviors:_.fingerprints,d=(e==="log"?it():ke()).domain([0,Re(t.map(_=>m(_)))||1]).range([0,o]),f=(s==="log"?it():ke()).domain([0,Re(t.map(_=>u(_)))||0]).range([l,0]),p=ur({zoomTransform:a,bounds:c,baseX:d,baseY:f}),x=d.range(),b=d.copy().range([x[0]*p.scaleX+p.x,x[1]*p.scaleX+p.x]),g=f.copy().range([f.range()[0]+p.y,f.range()[1]+p.y]);return{xValue:m,yValue:u,baseX:d,baseY:f,viewportX:b,viewportY:g,constrainedTransform:p}}const Pe={x:0,y:0,scaleX:1};function mr(t){const e=V.c(25),{minScale:s,maxScale:n,wheelSensitivity:i,containerRef:o}=t,l=s===void 0?1:s,a=n===void 0?50:n,c=i===void 0?.0013:i,[m,u]=D.useState(Pe),d=D.useRef(!1);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={x:0,y:0},e[0]=f):f=e[0];const p=D.useRef(f),x=D.useRef(null),b=D.useRef(!1),g=D.useRef(0),_=D.useRef(null);let y;e[1]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{x.current&&(cancelAnimationFrame(x.current),x.current=null)},e[1]=y):y=e[1];const j=y;let v;e[2]===Symbol.for("react.memo_cache_sentinel")?(v=k=>{j(),u(k)},e[2]=v):v=e[2];const N=v;let $;e[3]!==m?($=()=>{j();const k=m,I=performance.now(),A=qe(k.x,Pe.x),B=qe(k.y,Pe.y),U=qe(k.scaleX,Pe.scaleX),O=P=>{const X=P-I,z=Math.min(X/500,1),H=1-Math.pow(1-z,3),K={x:A(H),y:B(H),scaleX:U(H)};u(K),z<1?x.current=requestAnimationFrame(O):x.current=null};x.current=requestAnimationFrame(O)},e[3]=m,e[4]=$):$=e[4];const w=$;let M;e[5]!==o.current||e[6]!==a||e[7]!==l||e[8]!==m||e[9]!==c?(M=()=>{const k=o.current;if(!k)return;const I=A=>{j();const B=k.getBoundingClientRect(),U=A.clientX-B.left;if(Math.abs(A.deltaX)>Math.abs(A.deltaY))return;const O=1-A.deltaY*c,P=Math.max(l,Math.min(a,m.scaleX*O)),X=P!==m.scaleX;if(X||b.current?(A.preventDefault(),A.stopPropagation()):g.current=g.current+1,X){b.current=!0;const z=P/m.scaleX,te={x:U-(U-m.x)*z,y:m.y,scaleX:P};u(te)}g.current=0,_.current&&clearTimeout(_.current),_.current=window.setTimeout(()=>{g.current===0&&(b.current=!1),_.current=null},150)};return k.addEventListener("wheel",I,{passive:!1}),()=>{k.removeEventListener("wheel",I)}},e[5]=o.current,e[6]=a,e[7]=l,e[8]=m,e[9]=c,e[10]=M):M=e[10];let F;e[11]!==a||e[12]!==l||e[13]!==m||e[14]!==c?(F=[m,l,a,c,j],e[11]=a,e[12]=l,e[13]=m,e[14]=c,e[15]=F):F=e[15],D.useEffect(M,F);let L;e[16]===Symbol.for("react.memo_cache_sentinel")?(L=k=>{if(k.button!==0)return;j(),d.current=!0,p.current={x:k.clientX,y:k.clientY};const I=B=>{if(!d.current)return;const U=B.clientX-p.current.x,O=B.clientY-p.current.y;u(P=>({x:P.x+U,y:P.y+O,scaleX:P.scaleX})),p.current={x:B.clientX,y:B.clientY}},A=()=>{d.current=!1,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",I),document.addEventListener("mouseup",A)},e[16]=L):L=e[16];const C=L;let E;e[17]!==w?(E=k=>{k.preventDefault(),w()},e[17]=w,e[18]=E):E=e[18];const h=E;let S,R;e[19]===Symbol.for("react.memo_cache_sentinel")?(S=()=>()=>{j(),_.current&&clearTimeout(_.current)},R=[j],e[19]=S,e[20]=R):(S=e[19],R=e[20]),D.useEffect(S,R);let T;return e[21]!==h||e[22]!==w||e[23]!==m?(T={transform:m,onMouseDown:C,onDoubleClick:h,resetZoom:w,setTransform:N},e[21]=h,e[22]=w,e[23]=m,e[24]=T):T=e[24],T}const nt=270,Ve={zoomIdentity:Xs,select:Bt,scaleLinear:ke,scaleOrdinal:Xt,interpolateViridis:Bs,interpolateRgb:Os,schemeCategory10:Is},Tt=Ve.scaleLinear().domain([0,1]).range(["rgb(255, 198, 128)","rgb(240, 136, 62)","rgb(219, 109, 40)","rgb(189, 86, 29)","rgb(155, 66, 21)","rgb(118, 45, 10)","rgb(90, 30, 2)"]).interpolate(Ve.interpolateRgb);var at=(t=>(t.TOGETHER="linearized",t.SEPARATE="individual",t.LATEST="latest",t))(at||{});function dr(t,e){const s=t.linear_status_counts(e),n=t.linear_elapsed_time(e),i=[];for(let o=0;o<s.length;o++){const l=t.linear_reports[o];i.push({nodeid:t.nodeid,linear_status_counts:s[o],linear_elapsed_time:n[o],behaviors:l.behaviors,fingerprints:l.fingerprints})}return i}function ts(t){const e=V.c(4),{value:s,onChange:n}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[{value:"log",content:"Log"},{value:"linear",content:"Linear"}],e[0]=i):i=e[0];let o;return e[1]!==n||e[2]!==s?(o=r.jsx(ve,{value:s,onChange:n,options:i}),e[1]=n,e[2]=s,e[3]=o):o=e[3],o}function hr(){const t=V.c(23),[e,s]=le("graph_scale_x","log"),[n,i]=le("graph_axis_x","time");let o,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},l={display:"flex",alignItems:"center",gap:"0.5rem"},t[0]=o,t[1]=l):(o=t[0],l=t[1]);const a=n==="inputs"?Oe:Be;let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c={fontSize:"0.9rem"},t[2]=c):c=t[2];let m;t[3]!==a?(m=r.jsx(W,{icon:a,style:c}),t[3]=a,t[4]=m):m=t[4];const u=n==="inputs"?"Inputs":"Time";let d;t[5]!==m||t[6]!==u?(d=r.jsxs("div",{style:l,children:[m,u]}),t[5]=m,t[6]=u,t[7]=d):d=t[7];let f;t[8]===Symbol.for("react.memo_cache_sentinel")?(f={display:"flex",alignItems:"center",gap:"0.5rem"},t[8]=f):f=t[8];let p;t[9]!==e||t[10]!==s?(p=r.jsx(ts,{value:e,onChange:s}),t[9]=e,t[10]=s,t[11]=p):p=t[11];let x;t[12]===Symbol.for("react.memo_cache_sentinel")?(x={value:"inputs",content:r.jsx(W,{icon:Oe})},t[12]=x):x=t[12];let b;t[13]===Symbol.for("react.memo_cache_sentinel")?(b=[x,{value:"time",content:r.jsx(W,{icon:Be})}],t[13]=b):b=t[13];let g;t[14]!==n||t[15]!==i?(g=r.jsx(ve,{value:n,onChange:i,options:b}),t[14]=n,t[15]=i,t[16]=g):g=t[16];let _;t[17]!==g||t[18]!==p?(_=r.jsxs("div",{style:f,children:[p,g]}),t[17]=g,t[18]=p,t[19]=_):_=t[19];let y;return t[20]!==_||t[21]!==d?(y=r.jsxs("div",{className:"coverage-graph__label coverage-graph__label--x",style:o,children:[d,_]}),t[20]=_,t[21]=d,t[22]=y):y=t[22],y}function _r(){const t=V.c(23),[e,s]=le("graph_scale_y","linear"),[n,i]=le("graph_axis_y","behaviors");let o,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",zIndex:1},l={display:"flex",alignItems:"center",gap:"0.5rem"},t[0]=o,t[1]=l):(o=t[0],l=t[1]);let a;t[2]!==e||t[3]!==s?(a=r.jsx(ts,{value:e,onChange:s}),t[2]=e,t[3]=s,t[4]=a):a=t[4];let c;t[5]===Symbol.for("react.memo_cache_sentinel")?(c={value:"behaviors",content:r.jsx(W,{icon:Fe})},t[5]=c):c=t[5];let m;t[6]===Symbol.for("react.memo_cache_sentinel")?(m=[c,{value:"fingerprints",content:r.jsx(W,{icon:Ie})}],t[6]=m):m=t[6];let u;t[7]!==n||t[8]!==i?(u=r.jsx(ve,{value:n,onChange:i,options:m}),t[7]=n,t[8]=i,t[9]=u):u=t[9];let d;t[10]!==a||t[11]!==u?(d=r.jsxs("div",{style:l,children:[a,u]}),t[10]=a,t[11]=u,t[12]=d):d=t[12];let f;t[13]===Symbol.for("react.memo_cache_sentinel")?(f={display:"flex",alignItems:"center",gap:"0.5rem"},t[13]=f):f=t[13];const p=n==="behaviors"?Fe:Ie;let x;t[14]===Symbol.for("react.memo_cache_sentinel")?(x={fontSize:"0.9rem"},t[14]=x):x=t[14];let b;t[15]!==p?(b=r.jsx(W,{icon:p,style:x}),t[15]=p,t[16]=b):b=t[16];const g=n==="behaviors"?"Behaviors":"Fingerprints";let _;t[17]!==b||t[18]!==g?(_=r.jsxs("div",{style:f,children:[b,g]}),t[17]=b,t[18]=g,t[19]=_):_=t[19];let y;return t[20]!==_||t[21]!==d?(y=r.jsxs("div",{className:"coverage-graph__label coverage-graph__label--y",style:o,children:[d,_]}),t[20]=_,t[21]=d,t[22]=y):y=t[22],y}const Mt={linearized:{content:r.jsxs(r.Fragment,{children:[r.jsx(W,{icon:rt})," Together"]}),mobileContent:r.jsx(W,{icon:rt})},individual:{content:r.jsxs(r.Fragment,{children:[r.jsx(W,{icon:yt})," Separate"]}),mobileContent:r.jsx(W,{icon:yt})},latest:{content:r.jsxs(r.Fragment,{children:[r.jsx(W,{icon:bt})," Latest"]}),mobileContent:r.jsx(W,{icon:bt})}},ue={top:5,right:5,bottom:25,left:40};function pr(t){const e=V.c(54),{tests:s,filterString:n,workers_after:i,viewSetting:o}=t,l=n===void 0?"":n,a=i===void 0?null:i,c=D.useRef(null),[m]=le("graph_scale_x","log"),[u]=le("graph_scale_y","linear"),[d]=le("graph_axis_x","time"),[f]=le("graph_axis_y","behaviors"),p=Dt();ut();const x=Ke(),[b,g]=D.useState(800),_=Ve.scaleOrdinal(Ve.schemeCategory10).domain(Array.from(s.keys())),j=function(){let J=[];if(o==="linearized")J=Array.from(s.entries()).sortKey(br).map(q=>{const[ie,Q]=q;return{url:`/tests/${encodeURIComponent(ie)}`,reports:dr(Q,a),color:_(ie)}});else if(o==="individual"){const q=[];for(const fe of s.values())for(const ce of fe.reports_by_worker.values())ce.length>0&&q.push(ce[0].timestamp);const ie=rn(q)??0,Q=Re(q)??0,je=function(ce){if(q.length<=1)return Tt(.5);const me=(ce-ie)/(Q-ie);return Tt(me)};for(const[fe,ce]of s.entries())for(const me of ce.reports_by_worker.values())me.length>0&&J.push({url:`/tests/${encodeURIComponent(fe)}`,reports:me.map(Ge=>Xe.fromReport(fe,Ge)),color:je(me[0].timestamp)})}else if(o==="latest")for(const[q,ie]of s.entries()){const Q=Re(Array.from(ie.reports_by_worker.values()),xr);Q&&J.push({url:`/tests/${encodeURIComponent(q)}`,reports:Q.map(je=>Xe.fromReport(q,je)),color:_(q)})}return J}();let v=j;if(l){let Y;e[0]!==l?(Y=J=>{var q;return(q=J.url)==null?void 0:q.toLowerCase().includes(l.toLowerCase())},e[0]=l,e[1]=Y):Y=e[1],v=j.filter(Y)}let N,$;e[2]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{if(c.current){const Y=new ResizeObserver(J=>{for(const q of J)g(q.contentRect.width)});return Y.observe(c.current),()=>Y.disconnect()}},$=[],e[2]=N,e[3]=$):(N=e[2],$=e[3]),D.useEffect(N,$);const w=b-ue.left-ue.right,M=nt-ue.top-ue.bottom,F=v.flatMap(gr);let L;e[4]===Symbol.for("react.memo_cache_sentinel")?(L={minScale:1,maxScale:50,containerRef:c},e[4]=L):L=e[4];const C=mr(L);let E;e[5]===Symbol.for("react.memo_cache_sentinel")?(E={yMin:0},e[5]=E):E=e[5];const h=fr(F,m,u,d,f,w,M,C.transform,E);let S;if(e[6]!==F||e[7]!==h){let Y;e[9]!==h?(Y=q=>h.viewportX(h.xValue(q)),e[9]=h,e[10]=Y):Y=e[10];let J;e[11]!==h?(J=q=>h.viewportY(h.yValue(q)),e[11]=h,e[12]=J):J=e[12],S=Vs().x(Y).y(J).addAll(F),e[6]=F,e[7]=h,e[8]=S}else S=e[8];const R=S;let T;e[13]!==R?(T=(Y,J)=>R.find(Y,J,10)||null,e[13]=R,e[14]=T):T=e[14];const k=T;let I,A;e[15]===Symbol.for("react.memo_cache_sentinel")?(I=Y=>{c.current!==Y&&(c.current=Y)},A={position:"relative",width:"100%",height:`${nt}px`,userSelect:"none"},e[15]=I,e[16]=A):(I=e[15],A=e[16]);let B;e[17]!==k||e[18]!==x?(B=Y=>{const J=Y.currentTarget.getBoundingClientRect(),q=Y.clientX-J.left-ue.left,ie=Y.clientY-J.top-ue.top,Q=k(q,ie);if(Q){const je=Q.behaviors===1?"":"s",fe=Q.fingerprints===1?"":"s",ce=Q.linear_status_counts.sum()===1?"":"s",me=Q.linear_elapsed_time===1?"":"s",Ge=`
            <div style="font-weight: bold; margin-bottom: 4px;">${Gt(Q.nodeid)}</div>
            <div>${Q.behaviors.toLocaleString()} behavior${je} / ${Q.fingerprints.toLocaleString()} fingerprint${fe}</div>
            <div>${Q.linear_status_counts.sum().toLocaleString()} input${ce} / ${Q.linear_elapsed_time.toFixed(1)} second${me}</div>
          `;x.showTooltip(Ge,Y.clientX,Y.clientY,"coverage-graph")}else x.hideTooltip("coverage-graph")},e[17]=k,e[18]=x,e[19]=B):B=e[19];let U;e[20]!==x?(U=()=>{x.hideTooltip("coverage-graph")},e[20]=x,e[21]=U):U=e[21];let O;e[22]===Symbol.for("react.memo_cache_sentinel")?(O={position:"absolute",top:0,left:0,width:"100%",height:`${nt}px`,pointerEvents:"none"},e[22]=O):O=e[22];let P;e[23]!==w?(P=r.jsx("defs",{children:r.jsx("clipPath",{id:"clip-content",children:r.jsx("rect",{y:-2,width:w,height:M+4})})}),e[23]=w,e[24]=P):P=e[24];let X;e[25]!==v||e[26]!==p||e[27]!==h.viewportX||e[28]!==h.viewportY||e[29]!==h.xValue||e[30]!==h.yValue?(X=r.jsx("g",{clipPath:"url(#clip-content)",children:r.jsx(ar,{lines:v,viewportXScale:h.viewportX,viewportYScale:h.viewportY,xValue:h.xValue,yValue:h.yValue,navigate:p})}),e[25]=v,e[26]=p,e[27]=h.viewportX,e[28]=h.viewportY,e[29]=h.xValue,e[30]=h.yValue,e[31]=X):X=e[31];const z=`translate(0, ${h.baseY.range()[0]})`,H=m==="log";let K;e[32]!==h.baseX||e[33]!==h.constrainedTransform||e[34]!==z||e[35]!==H?(K=r.jsx(At,{baseScale:h.baseX,orientation:"bottom",transform:z,isLogScale:H,zoomTransform:h.constrainedTransform}),e[32]=h.baseX,e[33]=h.constrainedTransform,e[34]=z,e[35]=H,e[36]=K):K=e[36];const te=u==="log";let G;e[37]!==h.baseY||e[38]!==h.constrainedTransform||e[39]!==te?(G=r.jsx(At,{baseScale:h.baseY,orientation:"left",isLogScale:te,zoomTransform:h.constrainedTransform}),e[37]=h.baseY,e[38]=h.constrainedTransform,e[39]=te,e[40]=G):G=e[40];let ae;e[41]!==X||e[42]!==K||e[43]!==G?(ae=r.jsxs("g",{transform:`translate(${ue.left}, ${ue.top})`,children:[X,K,G]}),e[41]=X,e[42]=K,e[43]=G,e[44]=ae):ae=e[44];let ge;e[45]!==P||e[46]!==ae?(ge=r.jsxs("svg",{className:"coverage-graph__svg",style:O,children:[P,ae]}),e[45]=P,e[46]=ae,e[47]=ge):ge=e[47];let Me;return e[48]!==B||e[49]!==U||e[50]!==ge||e[51]!==C.onDoubleClick||e[52]!==C.onMouseDown?(Me=r.jsx("div",{ref:I,style:A,onMouseDown:C.onMouseDown,onDoubleClick:C.onDoubleClick,onMouseMove:B,onMouseLeave:U,children:ge}),e[48]=B,e[49]=U,e[50]=ge,e[51]=C.onDoubleClick,e[52]=C.onMouseDown,e[53]=Me):Me=e[53],Me}function gr(t){return t.reports}function xr(t){return t[0].elapsed_time}function br(t){const[e]=t;return e}function yr(){const t=V.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=["rgb(255, 198, 128)","rgb(240, 136, 62)","rgb(219, 109, 40)","rgb(189, 86, 29)","rgb(155, 66, 21)","rgb(118, 45, 10)","rgb(90, 30, 2)"],t[0]=e):e=t[0];const s=e;let n;return t[1]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsxs("div",{className:"coverage-graph__color-legend",children:[r.jsx("span",{children:"Older"}),r.jsx("div",{style:{display:"flex",gap:"2px"},children:s.map(vr)}),r.jsx("span",{children:"Newer"})]}),t[1]=n):n=t[1],n}function vr(t,e){return r.jsx("div",{className:"coverage-graph__color-legend__square",style:{backgroundColor:t}},e)}function ss(t){const e=V.c(39),{tests:s,filterString:n,testsLoaded:i,workers_after:o,workerViews:l,workerViewSetting:a}=t,c=n===void 0?"":n,m=o===void 0?null:o;let u;e[0]!==l?(u=l===void 0?["linearized","individual","latest"]:l,e[0]=l,e[1]=u):u=e[1];const d=u;let[f,p]=le(a,"linearized");const b=ee(Array.from(s.values()).flatMap(Sr)).size==1;b&&(f="linearized");let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("div",{className:"card__header",style:{marginBottom:"1rem"},children:"Coverage"}),e[2]=g):g=e[2];const _=f==="individual"?"space-between":"flex-end",y=f==="individual"?"center":"default";let j;e[3]!==_||e[4]!==y?(j={display:"flex",justifyContent:_,alignItems:y,marginBottom:"1rem"},e[3]=_,e[4]=y,e[5]=j):j=e[5];let v;e[6]!==f?(v=f==="individual"&&r.jsx(yr,{}),e[6]=f,e[7]=v):v=e[7];const N=f,$=p;let w;e[8]!==d?(w=d.map(jr),e[8]=d,e[9]=w):w=e[9];let M;e[10]!==b||e[11]!==p||e[12]!==w||e[13]!==f?(M=r.jsx(ve,{value:N,onChange:$,options:w,disabled:b}),e[10]=b,e[11]=p,e[12]=w,e[13]=f,e[14]=M):M=e[14];let F;e[15]!==b?(F=b&&r.jsx("span",{className:"tooltip__text",children:"Switching worker display mode requires multiple workers"}),e[15]=b,e[16]=F):F=e[16];let L;e[17]!==M||e[18]!==F?(L=r.jsxs("span",{className:"tooltip",children:[M,F]}),e[17]=M,e[18]=F,e[19]=L):L=e[19];let C;e[20]!==L||e[21]!==j||e[22]!==v?(C=r.jsxs("div",{style:j,children:[v,L]}),e[20]=L,e[21]=j,e[22]=v,e[23]=C):C=e[23];let E,h;e[24]===Symbol.for("react.memo_cache_sentinel")?(E={marginRight:"15px",flex:1,height:"auto"},h=r.jsx(_r,{}),e[24]=E,e[25]=h):(E=e[24],h=e[25]);let S;e[26]!==c||e[27]!==s||e[28]!==i||e[29]!==f||e[30]!==m?(S=r.jsx(pr,{tests:s,testsLoaded:i,viewSetting:f,workers_after:m,filterString:c}),e[26]=c,e[27]=s,e[28]=i,e[29]=f,e[30]=m,e[31]=S):S=e[31];let R,T;e[32]===Symbol.for("react.memo_cache_sentinel")?(R=r.jsx("div",{}),T=r.jsx(hr,{}),e[32]=R,e[33]=T):(R=e[32],T=e[33]);let k;e[34]!==S?(k=r.jsx("div",{className:"coverage-graph__container",children:r.jsxs("div",{className:"coverage-graph__grid",style:E,children:[h,S,R,T]})}),e[34]=S,e[35]=k):k=e[35];let I;return e[36]!==C||e[37]!==k?(I=r.jsxs("div",{className:"card",children:[g,C,k]}),e[36]=C,e[37]=k,e[38]=I):I=e[38],I}function jr(t){return{value:t,content:Mt[t].content,mobileContent:Mt[t].mobileContent}}function Sr(t){return Array.from(t.reports_by_worker.values())}const ye={[Z.FAILED_FATALLY]:"Failed fatally",[Z.FAILED]:"Failed",[Z.SHRINKING]:"Shrinking",[Z.RUNNING]:"Running",[Z.SKIPPED_DYNAMICALLY]:"Skipped dynamically",[Z.WAITING]:"Waiting"};function gt(t){const e=V.c(3),{status:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={textAlign:"center"},e[0]=n):n=e[0];let i;return e[1]!==s?(i=r.jsx("span",{style:n,children:s===Z.FAILED_FATALLY?r.jsx("span",{className:"pill pill__failure",children:ye[s]}):s===Z.FAILED?r.jsx("span",{className:"pill pill__failure",children:ye[s]}):s===Z.SHRINKING?r.jsx("span",{className:"pill pill__warning",children:ye[s]}):s===Z.RUNNING?r.jsx("span",{className:"pill pill__success",children:ye[s]}):r.jsx("span",{className:"pill pill__neutral",children:ye[s]})}),e[1]=s,e[2]=i):i=e[2],i}function he(t){const e=V.c(5),{content:s,tooltip:n}=t;let i;e[0]!==n?(i=r.jsx("div",{className:"tooltip__text",children:n}),e[0]=n,e[1]=i):i=e[1];let o;return e[2]!==s||e[3]!==i?(o=r.jsxs("span",{className:"tooltip tooltip--underline",children:[s,i]}),e[2]=s,e[3]=i,e[4]=o):o=e[4],o}function ns(t){const e=Math.floor(t/3600),s=Math.floor(t%3600/60),n=Math.floor(t%60);return`${e>0?`${e}:${s.toString().padStart(2,"0")}`:s}:${n.toString().padStart(2,"0")}`}function rs(t){const e=t.ninputs(null),s=t.elapsed_time(null);return s===0?null:e/s}function xt(t){var s;if(t.linear_reports.length===0)return{inputs:"—",behaviors:"—",fingerprints:"—",executions:"—",inputsSinceBranch:"—",timeSpent:"—"};const e=rs(t);return{inputs:t.ninputs(null).toLocaleString(),behaviors:t.behaviors.toLocaleString(),fingerprints:t.fingerprints.toLocaleString(),executions:e===null?"—":`${e.toFixed(1).toLocaleString()}/s`,inputsSinceBranch:((s=t.since_new_behavior)==null?void 0:s.toLocaleString())??"—",timeSpent:ns(t.elapsed_time(null))}}Ae.registerLanguage("python",qt);function wr(t){const e=V.c(3),{failure:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={textAlign:"center"},e[0]=n):n=e[0];let i;return e[1]!==s.state?(i=r.jsx("span",{style:n,children:s.state==="shrunk"?r.jsx("span",{className:"pill pill__neutral",children:"Fully shrunk"}):s.state==="unshrunk"?r.jsx("span",{className:"pill pill__neutral",children:"Still shrinking..."}):r.jsx(r.Fragment,{})}),e[1]=s.state,e[2]=i):i=e[2],i}function Nr(t){const e=V.c(18),{failure:s}=t;let n,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",alignItems:"center",gap:"0.7rem",marginBottom:"1rem"},i=r.jsx("div",{className:"failure__title",children:"Failure"}),e[0]=n,e[1]=i):(n=e[0],i=e[1]);let o;e[2]!==s?(o=r.jsxs("div",{style:n,children:[i,r.jsx(wr,{failure:s})]}),e[2]=s,e[3]=o):o=e[3];let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"failure__item__subtitle",children:"Call"}),e[4]=l):l=e[4];const a=s.observation.metadata.get("reproduction_decorator")+`
`+s.observation.representation;let c;e[5]!==a?(c=r.jsx("pre",{children:r.jsx("code",{className:"language-python",children:a})}),e[5]=a,e[6]=c):c=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx("div",{className:"failure__item__subtitle",children:"Traceback"}),e[7]=m):m=e[7];let u;e[8]!==s.observation.metadata?(u=s.observation.metadata.get("traceback"),e[8]=s.observation.metadata,e[9]=u):u=e[9];let d;e[10]!==u?(d=r.jsx("pre",{children:r.jsx("code",{className:"language-python",children:u})}),e[10]=u,e[11]=d):d=e[11];let f;e[12]!==c||e[13]!==d?(f=r.jsxs("div",{className:"failure__item",children:[l,c,m,d]}),e[12]=c,e[13]=d,e[14]=f):f=e[14];let p;return e[15]!==f||e[16]!==o?(p=r.jsxs("div",{className:"card",children:[o,f]}),e[15]=f,e[16]=o,e[17]=p):p=e[17],p}function $r(t){const e=V.c(5),{failure:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("div",{className:"failure__title",children:"Fatal failure"}),e[0]=n):n=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("div",{className:"failure__item__subtitle",children:"Traceback"}),e[1]=i):i=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o={whiteSpace:"pre-wrap"},e[2]=o):o=e[2];let l;return e[3]!==s?(l=r.jsxs("div",{className:"card",children:[n,r.jsxs("div",{className:"failure__item",children:[i,r.jsx("pre",{children:r.jsx("code",{className:"language-python",style:o,children:s})})]})]}),e[3]=s,e[4]=l):l=e[4],l}function Cr(){const t=V.c(55),{nodeid:e}=fs(),{tests:s,testsLoaded:n}=ht(e),i=D.useRef(null),[o,l]=D.useState(null);let a,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{Zt().then(O=>{l(O)})},c=[],t[0]=a,t[1]=c):(a=t[0],c=t[1]),D.useEffect(a,c);let m;t[2]!==e||t[3]!==s?(m=s.get(e)??null,t[2]=e,t[3]=s,t[4]=m):m=t[4];const u=m;let d,f;if(t[5]!==u?(d=()=>{u&&Yt(i)},f=[u],t[5]=u,t[6]=d,t[7]=f):(d=t[6],f=t[7]),D.useEffect(d,f),!e||!u){let O;return t[8]===Symbol.for("react.memo_cache_sentinel")?(O=r.jsx("div",{children:"Test not found"}),t[8]=O):O=t[8],O}let p;t[9]!==u?(p=xt(u),t[9]=u,t[10]=p):p=t[10];const x=p;let b;t[11]===Symbol.for("react.memo_cache_sentinel")?(b={content:r.jsx(he,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Oe})}),tooltip:"Number of inputs"})},t[11]=b):b=t[11];let g;t[12]===Symbol.for("react.memo_cache_sentinel")?(g={content:r.jsx(he,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Fe})}),tooltip:"Number of behaviors (typically branches) found"})},t[12]=g):g=t[12];let _;t[13]===Symbol.for("react.memo_cache_sentinel")?(_={content:r.jsx(he,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Ie})}),tooltip:"Number of fingerprints (sets of behaviors) found"})},t[13]=_):_=t[13];let y;t[14]===Symbol.for("react.memo_cache_sentinel")?(y={content:r.jsx(he,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:It})}),tooltip:"Inputs per second"})},t[14]=y):y=t[14];let j;t[15]===Symbol.for("react.memo_cache_sentinel")?(j={content:r.jsx(he,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Ot})}),tooltip:"Number of inputs since a new behavior"})},t[15]=j):j=t[15];let v;t[16]===Symbol.for("react.memo_cache_sentinel")?(v=[b,g,_,y,j,{content:r.jsx(he,{content:r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:Be})}),tooltip:"Total time spent running"})}],t[16]=v):v=t[16];const N=v;let $;t[17]===Symbol.for("react.memo_cache_sentinel")?($=r.jsxs(pe,{to:"/",className:"back-link",children:[r.jsx(W,{icon:Ts})," All tests"]}),t[17]=$):$=t[17];let w,M;t[18]===Symbol.for("react.memo_cache_sentinel")?(w={display:"flex",alignItems:"center",gap:"0.7rem"},M={wordBreak:"break-all",fontSize:"1.5rem",fontWeight:"bold"},t[18]=w,t[19]=M):(w=t[18],M=t[19]);let F;t[20]!==e?(F=r.jsx("span",{style:M,children:e}),t[20]=e,t[21]=F):F=t[21];let L;t[22]!==u.status?(L=r.jsx(gt,{status:u.status}),t[22]=u.status,t[23]=L):L=t[23];let C;t[24]!==F||t[25]!==L?(C=r.jsxs("div",{style:w,children:[F,L]}),t[24]=F,t[25]=L,t[26]=C):C=t[26];let E;t[27]===Symbol.for("react.memo_cache_sentinel")?(E={paddingTop:"1rem",paddingBottom:"1rem"},t[27]=E):E=t[27];let h;t[28]!==x?(h=r.jsx("div",{style:E,children:r.jsx(_t,{headers:N,data:[x],row:Rr})}),t[28]=x,t[29]=h):h=t[29];let S;t[30]!==C||t[31]!==h?(S=r.jsxs("div",{className:"card",children:[C,h]}),t[30]=C,t[31]=h,t[32]=S):S=t[32];let R;t[33]!==e||t[34]!==u?(R=new Map([[e,u]]),t[33]=e,t[34]=u,t[35]=R):R=t[35];let T;t[36]!==R||t[37]!==n?(T=r.jsx(ss,{tests:R,testsLoaded:n,workerViewSetting:"graph_worker_view_test"}),t[36]=R,t[37]=n,t[38]=T):T=t[38];let k;t[39]!==u.normalFailures?(k=u.normalFailures.map(kr),t[39]=u.normalFailures,t[40]=k):k=t[40];let I;t[41]!==u.fatal_failure?(I=u.fatal_failure&&r.jsx($r,{failure:u.fatal_failure}),t[41]=u.fatal_failure,t[42]=I):I=t[42];let A;t[43]!==u?(A=r.jsx(An,{test:u}),t[43]=u,t[44]=A):A=t[44];let B;t[45]!==e||t[46]!==o?(B=(o==null?void 0:o.includes(e))&&r.jsx("div",{className:"card",children:r.jsx(ft,{title:"Patches",defaultState:"closed",headerClass:"card__header",children:r.jsx(es,{nodeid:e})})}),t[45]=e,t[46]=o,t[47]=B):B=t[47];let U;return t[48]!==S||t[49]!==T||t[50]!==k||t[51]!==I||t[52]!==A||t[53]!==B?(U=r.jsxs("div",{ref:i,children:[$,S,T,k,I,A,B]}),t[48]=S,t[49]=T,t[50]=k,t[51]=I,t[52]=A,t[53]=B,t[54]=U):U=t[54],U}function kr(t){return r.jsx(Nr,{failure:t})}function Rr(t){return[r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.inputs}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.behaviors}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.fingerprints}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.executions}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.inputsSinceBranch}),r.jsx("div",{style:{fontVariantNumeric:"tabular-nums"},children:t.timeSpent})]}function be(t){const e=V.c(5),{icon:s,tooltip:n}=t;let i;e[0]!==s?(i=r.jsx("div",{className:"table__header__icon",children:r.jsx(W,{icon:s})}),e[0]=s,e[1]=i):i=e[1];let o;return e[2]!==i||e[3]!==n?(o=r.jsx(he,{content:i,tooltip:n}),e[2]=i,e[3]=n,e[4]=o):o=e[4],o}function $e(t){const e=V.c(5),{icon:s,value:n}=t;let i;e[0]!==n?(i=r.jsx("span",{className:"table__inline-statistic__value",children:n}),e[0]=n,e[1]=i):i=e[1];let o;return e[2]!==s||e[3]!==i?(o=r.jsxs("div",{className:"table__inline-statistic",children:[s,i]}),e[2]=s,e[3]=i,e[4]=o):o=e[4],o}function Er(t){const e=V.c(15),{tests:s,onFilterChange:n}=t;let i;e[0]!==s?(i=Array.from(s).sortKey(Vr).map(Xr),e[0]=s,e[1]=i):i=e[1];const o=i;let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(be,{icon:Oe,tooltip:"Number of inputs"}),e[2]=l):l=e[2];const a=l;let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(be,{icon:Fe,tooltip:"Number of behaviors (typically branches) found"}),e[3]=c):c=e[3];const m=c;let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(be,{icon:Ie,tooltip:"Number of fingerprints (sets of behaviors) found"}),e[4]=u):u=e[4];const d=u;let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(be,{icon:It,tooltip:"Inputs per second"}),e[5]=f):f=e[5];const p=f;let x;e[6]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(be,{icon:Ot,tooltip:"Number of inputs since a new behavior"}),e[6]=x):x=e[6];const b=x;let g;e[7]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(be,{icon:Be,tooltip:"Total time spent running"}),e[7]=g):g=e[7];const _=g;let y;e[8]===Symbol.for("react.memo_cache_sentinel")?(y=[{content:"Test",sortKey:Br},{content:"Status",sortKey:Or,align:"center"},{content:a,align:"right",sortKey:Ir},{content:m,align:"right",sortKey:Fr},{content:d,align:"right",sortKey:Dr},{content:p,align:"right",sortKey:Pr},{content:b,align:"right",sortKey:Lr},{content:_,align:"right",sortKey:Mr}],e[8]=y):y=e[8];const j=y,v=Tr;let N;e[9]===Symbol.for("react.memo_cache_sentinel")?(N=function(E){const h=xt(E);return r.jsxs("div",{className:"table__mobile-row",children:[r.jsxs("div",{className:"table__mobile-row__header",children:[r.jsx(pe,{to:`/tests/${encodeURIComponent(E.nodeid)}`,className:"test__link",style:{wordBreak:"break-all"},children:E.nodeid}),r.jsx(gt,{status:E.status})]}),r.jsxs("div",{className:"table__mobile-row__statistics",children:[r.jsx($e,{icon:a,value:h.inputs}),r.jsx($e,{icon:m,value:h.behaviors}),r.jsx($e,{icon:p,value:h.executions}),r.jsx($e,{icon:b,value:h.inputsSinceBranch}),r.jsx($e,{icon:_,value:h.timeSpent})]})]})},e[9]=N):N=e[9];const $=N;let w;e[10]===Symbol.for("react.memo_cache_sentinel")?(w=function(E){return[E.nodeid,ye[E.status]]},e[10]=w):w=e[10];const M=w;let F;e[11]===Symbol.for("react.memo_cache_sentinel")?(F=r.jsx("div",{className:"card__header",children:"Tests"}),e[11]=F):F=e[11];let L;return e[12]!==n||e[13]!==o?(L=r.jsxs("div",{className:"card",children:[F,r.jsx(_t,{headers:j,data:o,row:v,mobileRow:$,getKey:Ar,filterStrings:M,onFilterChange:n})]}),e[12]=n,e[13]=o,e[14]=L):L=e[14],L}function Ar(t){return t.database_key??void 0}function Tr(t){const e=xt(t);return[r.jsx(pe,{to:`/tests/${encodeURIComponent(t.nodeid)}`,className:"test__link",style:{wordBreak:"break-all"},children:t.nodeid}),r.jsx("div",{style:{textAlign:"center"},children:r.jsx(gt,{status:t.status})}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:e.inputs}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:e.behaviors}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:e.fingerprints}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:e.executions}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:e.inputsSinceBranch}),r.jsx("div",{style:{textAlign:"right",fontVariantNumeric:"tabular-nums"},children:e.timeSpent})]}function Mr(t){return t.elapsed_time(null)}function Lr(t){return t.since_new_behavior??0}function Pr(t){return rs(t)??-1}function Dr(t){return t.fingerprints}function Fr(t){return t.behaviors}function Ir(t){return t.ninputs(null)}function Or(t){return t.status}function Br(t){return t.nodeid}function Xr(t){const[,e]=t;return e}function Vr(t){const[e,s]=t,n=s.ninputs(null);return[s.status,n!=null?-n:-1,e]}function Ur(){const t=V.c(10),{tests:e,testsLoaded:s}=ht(),[n,i]=D.useState("");let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=[at.TOGETHER,at.LATEST],t[0]=o):o=t[0];let l;t[1]!==n||t[2]!==e||t[3]!==s?(l=r.jsx(ss,{tests:e,filterString:n,testsLoaded:s,workerViews:o,workerViewSetting:"graph_worker_view_tests"}),t[1]=n,t[2]=e,t[3]=s,t[4]=l):l=t[4];let a;t[5]!==e?(a=r.jsx(Er,{tests:e,onFilterChange:i}),t[5]=e,t[6]=a):a=t[6];let c;return t[7]!==l||t[8]!==a?(c=r.jsxs("div",{className:"dashboard",children:[l,a]}),t[7]=l,t[8]=a,t[9]=c):c=t[9],c}function Wr(t){const e=V.c(43),{min:s,max:n,value:i,onChange:o,step:l}=t,a=l===void 0?1:l,[c,m]=D.useState(null),u=D.useRef(null);console.assert(s<=n,`min: ${s} max: ${n}`);const[d,f]=i,p=n-s,x=p===0?0:(d-s)/p*100,b=p===0?100:(f-s)/p*100,g=x<50?1:2,_=b<50?2:1;let y;e[0]!==n||e[1]!==s||e[2]!==p||e[3]!==a?(y=H=>{if(!u.current)return s;const K=u.current.getBoundingClientRect(),te=Math.max(0,Math.min(100,(H-K.left)/K.width*100)),G=s+te/100*p,ae=Math.round(G/a)*a;return Math.max(s,Math.min(n,ae))},e[0]=n,e[1]=s,e[2]=p,e[3]=a,e[4]=y):y=e[4];const j=y;let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=H=>K=>{K.preventDefault(),m(H)},e[5]=v):v=e[5];const N=v;let $;e[6]!==c||e[7]!==j||e[8]!==f||e[9]!==d||e[10]!==o?($=H=>{if(!c)return;const K=j(H.clientX);o(c==="min"?[Math.min(K,f),f]:[d,Math.max(K,d)])},e[6]=c,e[7]=j,e[8]=f,e[9]=d,e[10]=o,e[11]=$):$=e[11];const w=$;let M;e[12]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{m(null)},e[12]=M):M=e[12];const F=M;let L;e[13]!==c||e[14]!==j||e[15]!==f||e[16]!==d||e[17]!==o?(L=H=>{if(c)return;const K=j(H.clientX),te=Math.abs(K-d),G=Math.abs(K-f);te<G?o([Math.min(K,f),f]):o([d,Math.max(K,d)])},e[13]=c,e[14]=j,e[15]=f,e[16]=d,e[17]=o,e[18]=L):L=e[18];const C=L;let E,h;e[19]!==c||e[20]!==w?(E=()=>c?(document.addEventListener("mousemove",w),document.addEventListener("mouseup",F),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",F)}):Kr,h=[c,w,F],e[19]=c,e[20]=w,e[21]=E,e[22]=h):(E=e[21],h=e[22]),D.useEffect(E,h);const S=`${x}%`,R=`${b-x}%`;let T;e[23]!==R||e[24]!==S?(T=r.jsx("div",{className:"range-slider__range",style:{left:S,width:R}}),e[23]=R,e[24]=S,e[25]=T):T=e[25];const k=`${x}%`;let I;e[26]!==k||e[27]!==g?(I={left:k,zIndex:g},e[26]=k,e[27]=g,e[28]=I):I=e[28];let A;e[29]===Symbol.for("react.memo_cache_sentinel")?(A=N("min"),e[29]=A):A=e[29];let B;e[30]!==I?(B=r.jsx("div",{className:"range-slider__thumb range-slider__thumb--min",style:I,onMouseDown:A}),e[30]=I,e[31]=B):B=e[31];const U=`${b}%`;let O;e[32]!==U||e[33]!==_?(O={left:U,zIndex:_},e[32]=U,e[33]=_,e[34]=O):O=e[34];let P;e[35]===Symbol.for("react.memo_cache_sentinel")?(P=N("max"),e[35]=P):P=e[35];let X;e[36]!==O?(X=r.jsx("div",{className:"range-slider__thumb range-slider__thumb--max",style:O,onMouseDown:P}),e[36]=O,e[37]=X):X=e[37];let z;return e[38]!==C||e[39]!==T||e[40]!==B||e[41]!==X?(z=r.jsx("div",{className:"range-slider",children:r.jsx("div",{className:"range-slider__container",children:r.jsxs("div",{ref:u,className:"range-slider__track",onClick:C,children:[T,B,X]})})}),e[38]=C,e[39]=T,e[40]=B,e[41]=X,e[42]=z):z=e[42],z}function Kr(){}let Hr=class{constructor(e,s){this.uuid=e,this.segments=s}visibleSegments(e){return this.segments.filter(s=>s.end>=e[0]&&s.start<=e[1])}};function Ue(t){return new Date(t*1e3).toLocaleString()}const Yr=24*60*60;function Lt(t,e){return[Math.max(t,e-Yr),e]}function zr(t){let e=0;for(let o=0;o<t.length;o++)e=(e<<5)-e+t.charCodeAt(o)&4294967295;const s=Math.abs(e)%360,n=45+Math.abs(e>>8)%30,i=45+Math.abs(e>>16)%20;return`hsl(${s}, ${n}%, ${i}%)`}function De(t){const e=V.c(7),{label:s,value:n}=t;let i;e[0]!==s?(i=r.jsx("span",{className:"workers__worker__details__label",children:s}),e[0]=s,e[1]=i):i=e[1];let o;e[2]!==n?(o=r.jsx("span",{className:"workers__worker__details__value",children:n}),e[2]=n,e[3]=o):o=e[3];let l;return e[4]!==i||e[5]!==o?(l=r.jsxs("div",{className:"workers__worker__details__item",children:[i,o]}),e[4]=i,e[5]=o,e[6]=l):l=e[6],l}const Gr=t=>{const e=V.c(34),{worker:s,range:n,expandedWorkers:i,onWorkerClick:o,segmentStyle:l,navigate:a,showTooltip:c,hideTooltip:m,moveTooltip:u}=t,d=s.uuid,f=`workers__worker ${i.has(s.uuid)?"workers__worker--expanded":""}`;let p;e[0]!==o||e[1]!==s.uuid?(p=()=>o(s.uuid),e[0]=o,e[1]=s.uuid,e[2]=p):p=e[2];let x;e[3]!==m?(x=()=>m("workers"),e[3]=m,e[4]=x):x=e[4];let b;e[5]!==m?(b=()=>m("workers"),e[5]=m,e[6]=b):b=e[6];let g;if(e[7]!==m||e[8]!==u||e[9]!==a||e[10]!==n||e[11]!==l||e[12]!==c||e[13]!==s){let v;e[15]!==m||e[16]!==u||e[17]!==a||e[18]!==l||e[19]!==c?(v=(N,$)=>r.jsx("div",{className:"workers__timeline__segment",style:l(N),onClick:w=>{zt(w,`/tests/${encodeURIComponent(N.nodeid)}`,a),w.stopPropagation()},onMouseEnter:w=>c(Gt(N.nodeid),w.clientX,w.clientY,"workers"),onMouseLeave:()=>m("workers"),onMouseMove:w=>u(w.clientX,w.clientY,"workers")},$),e[15]=m,e[16]=u,e[17]=a,e[18]=l,e[19]=c,e[20]=v):v=e[20],g=s.visibleSegments(n).map(v),e[7]=m,e[8]=u,e[9]=a,e[10]=n,e[11]=l,e[12]=c,e[13]=s,e[14]=g}else g=e[14];let _;e[21]!==b||e[22]!==g?(_=r.jsx("div",{className:"workers__worker__bar",onMouseLeave:b,children:g}),e[21]=b,e[22]=g,e[23]=_):_=e[23];let y;e[24]!==i||e[25]!==s?(y=i.has(s.uuid)&&r.jsx(qr,{worker:s}),e[24]=i,e[25]=s,e[26]=y):y=e[26];let j;return e[27]!==f||e[28]!==p||e[29]!==x||e[30]!==_||e[31]!==y||e[32]!==s.uuid?(j=r.jsxs("div",{className:f,onClick:p,onMouseLeave:x,children:[_,y]},d),e[27]=f,e[28]=p,e[29]=x,e[30]=_,e[31]=y,e[32]=s.uuid,e[33]=j):j=e[33],j},qr=t=>{const e=V.c(19),{worker:s}=t;let n;e[0]!==s.uuid?(n=r.jsx(De,{label:"Worker UUID",value:s.uuid}),e[0]=s.uuid,e[1]=n):n=e[1];const i=s.segments[s.segments.length-1].end-s.segments[0].start;let o;e[2]!==i?(o=ns(i),e[2]=i,e[3]=o):o=e[3];let l;e[4]!==o?(l=r.jsx(De,{label:"Lifetime",value:o}),e[4]=o,e[5]=l):l=e[5];let a;e[6]!==s.segments[0].start?(a=Ue(s.segments[0].start),e[6]=s.segments[0].start,e[7]=a):a=e[7];let c;e[8]!==a?(c=r.jsx(De,{label:"Started",value:a}),e[8]=a,e[9]=c):c=e[9];const m=s.segments[s.segments.length-1];let u;e[10]!==m.end?(u=Ue(m.end),e[10]=m.end,e[11]=u):u=e[11];let d;e[12]!==u?(d=r.jsx(De,{label:"Last seen",value:u}),e[12]=u,e[13]=d):d=e[13];let f;return e[14]!==n||e[15]!==l||e[16]!==c||e[17]!==d?(f=r.jsx("div",{className:"workers__worker__details",children:r.jsxs("div",{className:"workers__worker__details__grid",children:[n,l,c,d]})}),e[14]=n,e[15]=l,e[16]=c,e[17]=d,e[18]=f):f=e[18],f};function Jr(){const t=V.c(15),{tests:e}=ht(),s=Dt(),{showTooltip:n,hideTooltip:i,moveTooltip:o}=Ke();let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=new Set,t[0]=l):l=t[0];const[a,c]=D.useState(l),m=Ms(Array.from(e.values()).map(ti).flat().sortKey(ei)),u=new Map;m.forEach(h=>{const S=[];u.set(h,S),Array.from(e.values()).forEach(R=>{if(!R.reports_by_worker.has(h))return;const T=R.reports_by_worker.get(h);S.push(...T.map(k=>({timestamp_monotonic:k.timestamp_monotonic,nodeid:R.nodeid})))}),S.sortKey(Qr)});let d=1/0,f=-1/0;const p=[];m.forEach(h=>{const S=u.get(h),R=[];let T=null;S.forEach((k,I)=>{d=Math.min(d,k.timestamp_monotonic),f=Math.max(f,k.timestamp_monotonic),!T||T.nodeid!==k.nodeid?(T&&R.push(T),T={nodeid:k.nodeid,start:k.timestamp_monotonic,end:k.timestamp_monotonic}):T.end=k.timestamp_monotonic,I===S.length-1&&T&&R.push(T)}),p.push(new Hr(h,R))}),p.sortKey(Zr);const[x,b]=D.useState(Lt(d,f));D.useEffect(()=>{b(Lt(d,f))},[d,f]);const[g,_]=x,y=_-g,j=h=>{let S,R;return y===0?(S=0,R=100):(S=(h.start-g)/y*100,R=(h.end-h.start)/y*100),{left:`${S}%`,width:`${R}%`,backgroundColor:zr(h.nodeid)}},v=h=>{c(S=>{const R=new Set(S);return R.has(h)?R.delete(h):R.add(h),R})};let N;t[1]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx("div",{className:"card__header",children:"Workers "}),t[1]=N):N=t[1];let $;t[2]===Symbol.for("react.memo_cache_sentinel")?($=r.jsxs("div",{className:"card__text",children:[r.jsx("div",{className:"card__text__paragraph",children:"This page shows the history of your workers, and what tests they have been fuzzing."}),r.jsx("div",{className:"card__text__paragraph",children:'Roughly speaking, "one worker" = "one CPU core".'})]}),t[2]=$):$=t[2];let w;t[3]===Symbol.for("react.memo_cache_sentinel")?(w=h=>b(h),t[3]=w):w=t[3];let M;t[4]!==g?(M=Ue(g),t[4]=g,t[5]=M):M=t[5];let F;t[6]!==M?(F=r.jsx("span",{className:"workers__timeline-header__label",children:M}),t[6]=M,t[7]=F):F=t[7];let L;t[8]!==_?(L=Ue(_),t[8]=_,t[9]=L):L=t[9];let C;t[10]!==L?(C=r.jsx("span",{className:"workers__timeline-header__label",children:L}),t[10]=L,t[11]=C):C=t[11];let E;return t[12]!==F||t[13]!==C?(E=r.jsxs("div",{className:"workers__timeline-header",children:[F,C]}),t[12]=F,t[13]=C,t[14]=E):E=t[14],r.jsxs("div",{className:"card",children:[N,r.jsxs("div",{className:"card__body",children:[$,r.jsxs("div",{className:"workers",children:[r.jsx("div",{className:"workers__controls",children:r.jsx(Wr,{min:d,max:f,value:x,onChange:w,step:(f-d)/1e3})}),E,p.map(h=>h.visibleSegments(x).length>0&&r.jsx(Gr,{worker:h,range:x,expandedWorkers:a,onWorkerClick:v,segmentStyle:j,navigate:s,showTooltip:n,hideTooltip:i,moveTooltip:o},h.uuid))]})]})]})}function Zr(t){return t.segments[0].start}function Qr(t){return t.timestamp_monotonic}function ei(t){return t}function ti(t){return Array.from(t.reports_by_worker.keys())}function si(){const t=V.c(7),e=ms;let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(Fn,{}),t[0]=s):s=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(de,{path:"/",element:r.jsx(Ur,{})}),t[1]=n):n=t[1];let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(de,{path:"/patches",element:r.jsx(nr,{})}),t[2]=i):i=t[2];let o;t[3]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(de,{path:"/collected",element:r.jsx(Hn,{})}),t[3]=o):o=t[3];let l;t[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(de,{path:"/workers",element:r.jsx(Jr,{})}),t[4]=l):l=t[4];let a;t[5]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(de,{path:"/tests/:nodeid",element:r.jsx(Cr,{})}),t[5]=a):a=t[5];let c;return t[6]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(e,{children:r.jsx(qs,{children:r.jsx(Mn,{children:r.jsx(tn,{children:r.jsx(ds,{children:r.jsxs(de,{element:s,children:[n,i,o,l,a,r.jsx(de,{path:"*",element:r.jsx(Qn,{})})]})})})})})}),t[6]=c):c=t[6],c}Hs.createRoot(document.getElementById("app")).render(r.jsx(hs.StrictMode,{children:r.jsx(si,{})}));
